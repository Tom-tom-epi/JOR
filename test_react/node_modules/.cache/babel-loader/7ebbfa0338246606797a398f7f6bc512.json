{"ast":null,"code":"import _classCallCheck from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import axios from'axios';import GroupActif from'./groupActif';import $ from'jquery';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CardCharacters=/*#__PURE__*/function(_React$Component){_inherits(CardCharacters,_React$Component);var _super=_createSuper(CardCharacters);function CardCharacters(props){var _this;_classCallCheck(this,CardCharacters);_this=_super.call(this,props);_this.getUsers=function(){var listUsers=[];for(var i=0;i<_this.state.users.length;i++){listUsers.push(_this.state.users[i]);}return listUsers;};_this.addToGroup=function(id,active){axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.post(\"https://ce-soir-c-est-jor.com:8000/api/user/addToGroup/\"+id+\"/\"+active+\"/\"+_this.props.id_party).then(function(res){//   Update self\n//   And update the group (child component)\n_this.setState({update:!_this.state.update});_this.setState({updateGroup:!_this.state.updateGroup});});if($(\".add_card_id_\"+id).hasClass(\"added\")){$(\".add_card_id_\"+id).removeClass(\"added\");$(\".add_card_id_\"+id).html(\"+\");}else{$(\".add_card_id_\"+id).addClass(\"added\");$(\".add_card_id_\"+id).html(\"x\");}};_this.state={users:[],//List of character\nupdate:true,//Updating self\nupdateGroup:true//Updating group\n};// console.log(this.props.id_party);\nreturn _this;}_createClass(CardCharacters,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){var _this2=this;if(this.state.update!==prevState.update){axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.get(\"https://ce-soir-c-est-jor.com:8000/api/users/\"+this.props.id_party).then(function(res){var result=Object.values(res.data);_this2.setState({users:result});_this2.setState({updateGroup:_this2.state.updateGroup});});// this.setState({ updateGroup: !this.state.updateGroup });\n// console.log(\"CARD -> \" + this.state.updateGroup);\n}else if(this.props.updateCard!==prevProps.updateCard){axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.get(\"https://ce-soir-c-est-jor.com:8000/api/users/\"+this.props.id_party).then(function(res){var result=Object.values(res.data);_this2.setState({users:result});});}}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.get(\"https://ce-soir-c-est-jor.com:8000/api/users/\"+this.props.id_party).then(function(res){var result=Object.values(res.data);_this3.setState({users:result});});}},{key:\"render\",value:function render(){var _this4=this;var users=this.getUsers();return/*#__PURE__*/_jsxs(\"div\",{children:[users.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"cardCharacters\",children:users.map(function(user,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"card \"+(user.active==2?\"active\":\"unactive\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"add-card add_card_id_\"+user.id+(user.active==2?\"added\":\"\"),onClick:_this4.addToGroup.bind(_this4.addToGroup,user.id,user.active),children:user.active==2?\"x\":\"+\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-name\",children:user.Nom}),/*#__PURE__*/_jsx(\"div\",{className:\"card-race\",children:user.Race}),/*#__PURE__*/_jsx(\"div\",{className:\"card-spe\",children:user.Spécial}),/*#__PURE__*/_jsx(\"div\",{className:\"card-passif\",children:user.Passif}),/*#__PURE__*/_jsx(\"div\",{className:\"card-malus\",children:user.Malus})]},i);})}):/*#__PURE__*/_jsx(\"div\",{className:\"cardCharacters\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"empty_chars\",children:[\"Empty \",users.length]})}),users.length>0?/*#__PURE__*/_jsx(GroupActif,{updateGroup:this.state.updateGroup,id_party:this.props.id_party}):null]});}}]);return CardCharacters;}(React.Component);export default CardCharacters;","map":{"version":3,"sources":["/var/www/html/JOR/test_react/src/components/cardCharacters.js"],"names":["React","axios","GroupActif","$","CardCharacters","props","getUsers","listUsers","i","state","users","length","push","addToGroup","id","active","defaults","xsrfCookieName","xsrfHeaderName","post","id_party","then","res","setState","update","updateGroup","hasClass","removeClass","html","addClass","prevProps","prevState","snapshot","get","result","Object","values","data","updateCard","map","user","bind","Nom","Race","Spécial","Passif","Malus","Component"],"mappings":"wbAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,C,2FAEMC,CAAAA,c,4HACJ,wBAAYC,KAAZ,CAAmB,gDACjB,uBAAMA,KAAN,EADiB,MAUnBC,QAVmB,CAUR,UAAM,CACf,GAAIC,CAAAA,SAAS,CAAG,EAAhB,CACA,IAAI,GAAIC,CAAAA,CAAC,CAAG,CAAZ,CAAeA,CAAC,CAAG,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAApC,CAA4CH,CAAC,EAA7C,CAAiD,CAChDD,SAAS,CAACK,IAAV,CAAe,MAAKH,KAAL,CAAWC,KAAX,CAAiBF,CAAjB,CAAf,EACA,CACD,MACED,CAAAA,SADF,CAGD,CAlBkB,OAoBnBM,UApBmB,CAoBN,SAACC,EAAD,CAAKC,MAAL,CAAgB,CAC3Bd,KAAK,CAACe,QAAN,CAAeC,cAAf,CAAgC,WAAhC,CACAhB,KAAK,CAACe,QAAN,CAAeE,cAAf,CAAgC,aAAhC,CACAjB,KAAK,CAACkB,IAAN,CAAW,0DAA0DL,EAA1D,CAA6D,GAA7D,CAAiEC,MAAjE,CAAwE,GAAxE,CAA6E,MAAKV,KAAL,CAAWe,QAAnG,EACGC,IADH,CACQ,SAAAC,GAAG,CAAI,CACX;AACA;AACA,MAAKC,QAAL,CAAc,CAAEC,MAAM,CAAE,CAAC,MAAKf,KAAL,CAAWe,MAAtB,CAAd,EACA,MAAKD,QAAL,CAAc,CAAEE,WAAW,CAAE,CAAC,MAAKhB,KAAL,CAAWgB,WAA3B,CAAd,EACH,CAND,EASA,GAAGtB,CAAC,CAAC,gBAAkBW,EAAnB,CAAD,CAAwBY,QAAxB,CAAiC,OAAjC,CAAH,CAA8C,CAC5CvB,CAAC,CAAC,gBAAkBW,EAAnB,CAAD,CAAwBa,WAAxB,CAAoC,OAApC,EACAxB,CAAC,CAAC,gBAAkBW,EAAnB,CAAD,CAAwBc,IAAxB,CAA6B,GAA7B,EACD,CAHD,IAGM,CACJzB,CAAC,CAAC,gBAAkBW,EAAnB,CAAD,CAAwBe,QAAxB,CAAiC,OAAjC,EACA1B,CAAC,CAAC,gBAAkBW,EAAnB,CAAD,CAAwBc,IAAxB,CAA6B,GAA7B,EACD,CAEF,CAxCkB,CAEjB,MAAKnB,KAAL,CAAa,CACTC,KAAK,CAAE,EADE,CACY;AACrBc,MAAM,CAAE,IAFC,CAEY;AACrBC,WAAW,CAAE,IAAQ;AAHZ,CAAb,CAKA;AAPiB,aAQlB,C,6DAkCD,4BAAmBK,SAAnB,CAA8BC,SAA9B,CAAyCC,QAAzC,CAAmD,iBAE/C,GAAG,KAAKvB,KAAL,CAAWe,MAAX,GAAsBO,SAAS,CAACP,MAAnC,CAA2C,CACzCvB,KAAK,CAACe,QAAN,CAAeC,cAAf,CAAgC,WAAhC,CACAhB,KAAK,CAACe,QAAN,CAAeE,cAAf,CAAgC,aAAhC,CAEAjB,KAAK,CAACgC,GAAN,CAAU,gDAAiD,KAAK5B,KAAL,CAAWe,QAAtE,EACCC,IADD,CACM,SAAAC,GAAG,CAAI,CACT,GAAIY,CAAAA,MAAM,CAAGC,MAAM,CAACC,MAAP,CAAcd,GAAG,CAACe,IAAlB,CAAb,CACA,MAAI,CAACd,QAAL,CAAc,CAAEb,KAAK,CAAEwB,MAAT,CAAd,EACA,MAAI,CAACX,QAAL,CAAc,CAAEE,WAAW,CAAE,MAAI,CAAChB,KAAL,CAAWgB,WAA1B,CAAd,EACH,CALD,EAOA;AACA;AACD,CAbD,IAaM,IAAG,KAAKpB,KAAL,CAAWiC,UAAX,GAA0BR,SAAS,CAACQ,UAAvC,CAAmD,CACvDrC,KAAK,CAACe,QAAN,CAAeC,cAAf,CAAgC,WAAhC,CACAhB,KAAK,CAACe,QAAN,CAAeE,cAAf,CAAgC,aAAhC,CAEAjB,KAAK,CAACgC,GAAN,CAAU,gDAAiD,KAAK5B,KAAL,CAAWe,QAAtE,EACCC,IADD,CACM,SAAAC,GAAG,CAAI,CACT,GAAIY,CAAAA,MAAM,CAAGC,MAAM,CAACC,MAAP,CAAcd,GAAG,CAACe,IAAlB,CAAb,CACA,MAAI,CAACd,QAAL,CAAc,CAAEb,KAAK,CAAEwB,MAAT,CAAd,EACH,CAJD,EAKD,CACJ,C,iCAED,4BAAoB,iBAElBjC,KAAK,CAACe,QAAN,CAAeC,cAAf,CAAgC,WAAhC,CACAhB,KAAK,CAACe,QAAN,CAAeE,cAAf,CAAgC,aAAhC,CAEAjB,KAAK,CAACgC,GAAN,CAAU,gDAAiD,KAAK5B,KAAL,CAAWe,QAAtE,EACGC,IADH,CACQ,SAAAC,GAAG,CAAI,CACX,GAAIY,CAAAA,MAAM,CAAGC,MAAM,CAACC,MAAP,CAAcd,GAAG,CAACe,IAAlB,CAAb,CACA,MAAI,CAACd,QAAL,CAAc,CAAEb,KAAK,CAAEwB,MAAT,CAAd,EACD,CAJH,EAKD,C,sBAIC,iBAAS,iBAEL,GAAIxB,CAAAA,KAAK,CAAG,KAAKJ,QAAL,EAAZ,CAEA,mBACI,uBAEGI,KAAK,CAACC,MAAN,CAAe,CAAf,cACC,YAAK,SAAS,CAAC,gBAAf,UACGD,KAAK,CAAC6B,GAAN,CAAU,SAACC,IAAD,CAAOhC,CAAP,CAAa,CACxB,mBACI,aAAK,SAAS,CAAE,SAAWgC,IAAI,CAACzB,MAAL,EAAe,CAAf,CAAmB,QAAnB,CAA8B,UAAzC,CAAhB,wBACI,aAAM,SAAS,CAAE,wBAA0ByB,IAAI,CAAC1B,EAA/B,EAAqC0B,IAAI,CAACzB,MAAL,EAAe,CAAf,CAAmB,OAAnB,CAA6B,EAAlE,CAAjB,CAAwF,OAAO,CAAE,MAAI,CAACF,UAAL,CAAgB4B,IAAhB,CAAqB,MAAI,CAAC5B,UAA1B,CAAsC2B,IAAI,CAAC1B,EAA3C,CAA+C0B,IAAI,CAACzB,MAApD,CAAjG,UAAgKyB,IAAI,CAACzB,MAAL,EAAe,CAAf,CAAmB,GAAnB,CAAyB,GAAzL,EADJ,cAEI,YAAK,SAAS,CAAC,WAAf,UAA4ByB,IAAI,CAACE,GAAjC,EAFJ,cAGI,YAAK,SAAS,CAAC,WAAf,UAA4BF,IAAI,CAACG,IAAjC,EAHJ,cAII,YAAK,SAAS,CAAC,UAAf,UAA2BH,IAAI,CAACI,OAAhC,EAJJ,cAKI,YAAK,SAAS,CAAC,aAAf,UAA8BJ,IAAI,CAACK,MAAnC,EALJ,cAMI,YAAK,SAAS,CAAC,YAAf,UAA6BL,IAAI,CAACM,KAAlC,EANJ,GAA4EtC,CAA5E,CADJ,CASE,CAVD,CADH,EADD,cAkBC,YAAK,SAAS,CAAC,gBAAf,uBACE,WAAG,SAAS,CAAC,aAAb,oBAAkCE,KAAK,CAACC,MAAxC,GADF,EApBJ,CAwBGD,KAAK,CAACC,MAAN,CAAe,CAAf,cACA,KAAC,UAAD,EACG,WAAW,CAAE,KAAKF,KAAL,CAAWgB,WAD3B,CAEG,QAAQ,CAAE,KAAKpB,KAAL,CAAWe,QAFxB,EADA,CAIG,IA5BN,GADJ,CAiDH,C,4BAzIwBpB,KAAK,CAAC+C,S,EA4InC,cAAe3C,CAAAA,cAAf","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport GroupActif from './groupActif';\nimport $ from 'jquery';\n\nclass CardCharacters extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        users: [],           //List of character\n        update: true,        //Updating self\n        updateGroup: true    //Updating group\n    };\n    // console.log(this.props.id_party);\n  }\n\n  getUsers = () => {\n    var listUsers = [];\n    for(let i = 0; i < this.state.users.length; i++) {\n     listUsers.push(this.state.users[i]);\n    }\n    return (\n      listUsers\n    )\n  };\n\n  addToGroup = (id, active) => {\n    axios.defaults.xsrfCookieName = 'csrftoken'\n    axios.defaults.xsrfHeaderName = 'X-CSRFToken'\n    axios.post(`https://ce-soir-c-est-jor.com:8000/api/user/addToGroup/`+id+\"/\"+active+\"/\"+ this.props.id_party)\n      .then(res => {\n        //   Update self\n        //   And update the group (child component)\n        this.setState({ update: !this.state.update });           \n        this.setState({ updateGroup: !this.state.updateGroup });\n    })\n    \n    \n    if($(\".add_card_id_\" + id).hasClass(\"added\")) {\n      $(\".add_card_id_\" + id).removeClass(\"added\");\n      $(\".add_card_id_\" + id).html(\"+\");\n    }else {\n      $(\".add_card_id_\" + id).addClass(\"added\");\n      $(\".add_card_id_\" + id).html(\"x\");\n    }\n    \n  };\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n      \n      if(this.state.update !== prevState.update) {\n        axios.defaults.xsrfCookieName = 'csrftoken'\n        axios.defaults.xsrfHeaderName = 'X-CSRFToken'\n\n        axios.get(`https://ce-soir-c-est-jor.com:8000/api/users/`+ this.props.id_party)\n        .then(res => {\n            let result = Object.values(res.data);\n            this.setState({ users: result });\n            this.setState({ updateGroup: this.state.updateGroup });\n        })\n\n        // this.setState({ updateGroup: !this.state.updateGroup });\n        // console.log(\"CARD -> \" + this.state.updateGroup);\n      }else if(this.props.updateCard !== prevProps.updateCard) {\n        axios.defaults.xsrfCookieName = 'csrftoken'\n        axios.defaults.xsrfHeaderName = 'X-CSRFToken'\n\n        axios.get(`https://ce-soir-c-est-jor.com:8000/api/users/`+ this.props.id_party)\n        .then(res => {\n            let result = Object.values(res.data);\n            this.setState({ users: result });\n        })\n      }\n  }\n\n  componentDidMount() {\n   \n    axios.defaults.xsrfCookieName = 'csrftoken'\n    axios.defaults.xsrfHeaderName = 'X-CSRFToken'\n\n    axios.get(`https://ce-soir-c-est-jor.com:8000/api/users/`+ this.props.id_party)\n      .then(res => {\n        let result = Object.values(res.data);\n        this.setState({ users: result });\n      })\n  }\n\n  \n\n    render() {\n\n        var users = this.getUsers();\n\n        return (\n            <div>\n\n              {users.length > 0 ? \n                <div className='cardCharacters'>\n                  {users.map((user, i) => {\n                  return (\n                      <div className={\"card \" + (user.active == 2 ? \"active\" : \"unactive\") } key={i}>\n                          <span className={\"add-card add_card_id_\" + user.id + (user.active == 2 ? \"added\" : \"\")} onClick={this.addToGroup.bind(this.addToGroup, user.id, user.active)}>{(user.active == 2 ? \"x\" : \"+\")}</span>\n                          <div className=\"card-name\">{user.Nom}</div>\n                          <div className=\"card-race\">{user.Race}</div>\n                          <div className=\"card-spe\">{user.Spécial}</div>\n                          <div className=\"card-passif\">{user.Passif}</div>\n                          <div className=\"card-malus\">{user.Malus}</div>\n                      </div>\n                  )})}\n                  {/* <GroupActif \n                  updateGroup={this.state.updateGroup}\n                  id_party={this.props.id_party}/> */}\n                  </div>\n              :\n                <div className='cardCharacters'>\n                  <p className=\"empty_chars\">Empty {users.length}</p>\n                </div>\n              }\n              {users.length > 0 ? \n               <GroupActif \n                  updateGroup={this.state.updateGroup}\n                  id_party={this.props.id_party}/>\n                : null\n              }\n                {/* <div className='cardCharacters'>\n                    {users.map((user, i) => {\n                    return (\n                        <div className={\"card \" + (user.active == 2 ? \"active\" : \"unactive\") } key={i}>\n                            <span className={\"add-card add_card_id_\" + user.id + (user.active == 2 ? \"added\" : \"\")} onClick={this.addToGroup.bind(this.addToGroup, user.id, user.active)}>{(user.active == 2 ? \"x\" : \"+\")}</span>\n                            <div className=\"card-name\">{user.Nom}</div>\n                            <div className=\"card-race\">{user.Race}</div>\n                            <div className=\"card-spe\">{user.Spécial}</div>\n                            <div className=\"card-passif\">{user.Passif}</div>\n                            <div className=\"card-malus\">{user.Malus}</div>\n                        </div>\n                    )})}\n                </div>\n                <GroupActif \n                updateGroup={this.state.updateGroup}\n                id_party={this.props.id_party}/> */}\n            </div>\n        );\n    }\n  }\n\nexport default CardCharacters;"]},"metadata":{},"sourceType":"module"}