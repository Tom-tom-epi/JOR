{"ast":null,"code":"import _defineProperty from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import FormValidator from'../validation/FormValidator';import axios from'axios';import $ from'jquery';import{init,send}from'@emailjs/browser';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegisterForm=/*#__PURE__*/function(_Component){_inherits(RegisterForm,_Component);var _super=_createSuper(RegisterForm);function RegisterForm(){var _this;_classCallCheck(this,RegisterForm);_this=_super.call(this);_this.handleInputChange=function(event){event.preventDefault();_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.passwordMatch=function(confirmation,state){return state.password===confirmation;};_this.handleFormSubmit=function(event){event.preventDefault();var validation=_this.validator.validate(_this.state);_this.setState({validation:validation});_this.submitted=true;if(validation.isValid){axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.post(\"https://ce-soir-c-est-jor.com/api/api/user_register/\"+_this.state.username+\"/\"+_this.state.email+\"/\"+_this.state.password).then(function(res){console.log(res);if(res.data[0]!==undefined){if(res.data[0].username!==undefined){init(\"khZEel_OFdFp8l2MS\");var templateParams={username:res.data[0].username,email:res.data[0].email};send('service_fbwp3ta','template_viei73s',templateParams).then(function(response){console.log('SUCCESS!',response.status,response.text);},function(error){console.log('FAILED...',error);});_this.props.switchForm(true);}}});}};_this.validator=new FormValidator([{field:'username',method:'isEmpty',validWhen:false,message:'Enter username.'},{field:'email',method:'isEmpty',validWhen:false,message:'Enter your email.'},{field:'password',method:'isEmpty',validWhen:false,message:'Enter password.',minimalScore:4},{field:'password_confirmation',method:_this.passwordMatch,validWhen:true,message:'Enter password confirmation.'}]);_this.state={username:'',email:'',password:'',password_confirmation:'',validation:_this.validator.valid()};_this.submitted=false;return _this;}_createClass(RegisterForm,[{key:\"render\",value:function render(){var validation=this.submitted?this.validator.validate(this.state):this.state.validation;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container form_register form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"registrationForm formulaire_home\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Register\"}),/*#__PURE__*/_jsxs(\"div\",{className:validation.username.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"string\",className:\"form-control\",name:\"username\",placeholder:\"Username\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.username.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:validation.email.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"string\",className:\"form-control\",name:\"email\",placeholder:\"Email\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.email.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:validation.password.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Password\",name:\"password\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.password.message}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:validation.password_confirmation.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password_confirmation\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Confirm Password\",name:\"password_confirmation\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.password_confirmation.message})]}),/*#__PURE__*/_jsx(\"button\",{onClick:this.handleFormSubmit,className:\"btn\",children:\" Submit \"})]})})}),/*#__PURE__*/_jsxs(\"p\",{onClick:this.props.switchForm,className:\"switch_form\",children:[\"Have an account ? \",/*#__PURE__*/_jsx(\"br\",{}),\" Sign in\"]})]})});}}]);return RegisterForm;}(Component);export default RegisterForm;","map":{"version":3,"sources":["/var/www/html/JOR/test_react/src/components/RegisterForm.js"],"names":["React","Component","FormValidator","axios","$","init","send","RegisterForm","handleInputChange","event","preventDefault","setState","target","name","value","passwordMatch","confirmation","state","password","handleFormSubmit","validation","validator","validate","submitted","isValid","defaults","xsrfCookieName","xsrfHeaderName","post","username","email","then","res","console","log","data","undefined","templateParams","response","status","text","error","props","switchForm","field","method","validWhen","message","minimalScore","password_confirmation","valid","isInvalid"],"mappings":"4iBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAOC,CAAAA,aAAP,KAA0B,6BAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,OAAQC,IAAR,CAAcC,IAAd,KAA0B,kBAA1B,C,2FAEMC,CAAAA,Y,4GACN,uBAAa,8CACb,wBADa,MAuCbC,iBAvCa,CAuCO,SAAAC,KAAK,CAAI,CAC7BA,KAAK,CAACC,cAAN,GACA,MAAKC,QAAL,oBACCF,KAAK,CAACG,MAAN,CAAaC,IADd,CACqBJ,KAAK,CAACG,MAAN,CAAaE,KADlC,GAGC,CA5CY,OA6CbC,aA7Ca,CA6CG,SAACC,YAAD,CAAeC,KAAf,QAA0BA,CAAAA,KAAK,CAACC,QAAN,GAAmBF,YAA7C,EA7CH,OA8CbG,gBA9Ca,CA8CM,SAAAV,KAAK,CAAI,CAC5BA,KAAK,CAACC,cAAN,GACA,GAAMU,CAAAA,UAAU,CAAG,MAAKC,SAAL,CAAeC,QAAf,CAAwB,MAAKL,KAA7B,CAAnB,CACA,MAAKN,QAAL,CAAc,CACdS,UAAU,CAAVA,UADc,CAAd,EAGA,MAAKG,SAAL,CAAiB,IAAjB,CACA,GAAGH,UAAU,CAACI,OAAd,CAAuB,CAEnBrB,KAAK,CAACsB,QAAN,CAAeC,cAAf,CAAgC,WAAhC,CACAvB,KAAK,CAACsB,QAAN,CAAeE,cAAf,CAAgC,aAAhC,CAEAxB,KAAK,CAACyB,IAAN,CAAW,uDAAwD,MAAKX,KAAL,CAAWY,QAAnE,CAA8E,GAA9E,CAAoF,MAAKZ,KAAL,CAAWa,KAA/F,CAAuG,GAAvG,CAA6G,MAAKb,KAAL,CAAWC,QAAnI,EACCa,IADD,CACM,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACA,GAAGA,GAAG,CAACG,IAAJ,CAAS,CAAT,IAAgBC,SAAnB,CAA8B,CAC1B,GAAGJ,GAAG,CAACG,IAAJ,CAAS,CAAT,EAAYN,QAAZ,GAAyBO,SAA5B,CAAuC,CACnC/B,IAAI,CAAC,mBAAD,CAAJ,CACA,GAAIgC,CAAAA,cAAc,CAAG,CACjBR,QAAQ,CAAEG,GAAG,CAACG,IAAJ,CAAS,CAAT,EAAYN,QADL,CAEjBC,KAAK,CAAEE,GAAG,CAACG,IAAJ,CAAS,CAAT,EAAYL,KAFF,CAArB,CAIAxB,IAAI,CAAC,iBAAD,CAAoB,kBAApB,CAAwC+B,cAAxC,CAAJ,CACKN,IADL,CACU,SAASO,QAAT,CAAmB,CACzBL,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBI,QAAQ,CAACC,MAAjC,CAAyCD,QAAQ,CAACE,IAAlD,EACC,CAHL,CAGO,SAASC,KAAT,CAAgB,CACnBR,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAyBO,KAAzB,EACH,CALD,EAMA,MAAKC,KAAL,CAAWC,UAAX,CAAsB,IAAtB,EACH,CACJ,CACJ,CAnBD,EAoBH,CACA,CA/EY,CAEb,MAAKtB,SAAL,CAAiB,GAAInB,CAAAA,aAAJ,CAAkB,CAAC,CAChC0C,KAAK,CAAE,UADyB,CAEhCC,MAAM,CAAE,SAFwB,CAGhCC,SAAS,CAAE,KAHqB,CAIhCC,OAAO,CAAE,iBAJuB,CAAD,CAKhC,CACCH,KAAK,CAAE,OADR,CAECC,MAAM,CAAE,SAFT,CAGCC,SAAS,CAAE,KAHZ,CAICC,OAAO,CAAE,mBAJV,CALgC,CAUhC,CACCH,KAAK,CAAE,UADR,CAECC,MAAM,CAAE,SAFT,CAGCC,SAAS,CAAE,KAHZ,CAICC,OAAO,CAAE,iBAJV,CAKCC,YAAY,CAAE,CALf,CAVgC,CAgBhC,CACCJ,KAAK,CAAE,uBADR,CAECC,MAAM,CAAE,MAAK9B,aAFd,CAGC+B,SAAS,CAAE,IAHZ,CAICC,OAAO,CAAE,8BAJV,CAhBgC,CAAlB,CAAjB,CAwBA,MAAK9B,KAAL,CAAa,CACbY,QAAQ,CAAE,EADG,CAEbC,KAAK,CAAE,EAFM,CAGbZ,QAAQ,CAAE,EAHG,CAIb+B,qBAAqB,CAAE,EAJV,CAKb7B,UAAU,CAAE,MAAKC,SAAL,CAAe6B,KAAf,EALC,CAAb,CAOA,MAAK3B,SAAL,CAAiB,KAAjB,CAjCa,aAkCZ,C,+CA8CD,iBAAS,CACT,GAAIH,CAAAA,UAAU,CAAG,KAAKG,SAAL,CAAgB,KAAKF,SAAL,CAAeC,QAAf,CAAwB,KAAKL,KAA7B,CAAhB,CAAsD,KAAKA,KAAL,CAAWG,UAAlF,CACA,mBACA,kCACI,aAAK,SAAS,CAAC,8BAAf,wBACI,YAAK,SAAS,CAAC,KAAf,uBACI,kCACI,cAAM,SAAS,CAAC,kCAAhB,wBACA,gCADA,cAEI,aAAK,SAAS,CAAEA,UAAU,CAACS,QAAX,CAAoBsB,SAApB,CAAgC,WAAhC,CAA8C,IAA9D,wBACI,cAAO,OAAO,CAAC,UAAf,sBADJ,cAEI,cAAO,IAAI,CAAC,QAAZ,CAAqB,SAAS,CAAC,cAA/B,CAA8C,IAAI,CAAC,UAAnD,CAA8D,WAAW,CAAC,UAA1E,CAAqF,QAAQ,CAAE,KAAK3C,iBAApG,EAFJ,kBAE8H,aAAM,SAAS,CAAC,YAAhB,UAA8BY,UAAU,CAACS,QAAX,CAAoBkB,OAAlD,EAF9H,GAFJ,cAOI,aAAK,SAAS,CAAE3B,UAAU,CAACU,KAAX,CAAiBqB,SAAjB,CAA6B,WAA7B,CAA2C,IAA3D,wBACI,cAAO,OAAO,CAAC,OAAf,mBADJ,cAEI,cAAO,IAAI,CAAC,QAAZ,CAAqB,SAAS,CAAC,cAA/B,CAA8C,IAAI,CAAC,OAAnD,CAA2D,WAAW,CAAC,OAAvE,CAA+E,QAAQ,CAAE,KAAK3C,iBAA9F,EAFJ,kBAEwH,aAAM,SAAS,CAAC,YAAhB,UAA8BY,UAAU,CAACU,KAAX,CAAiBiB,OAA/C,EAFxH,GAPJ,cAWI,aAAK,SAAS,CAAE3B,UAAU,CAACF,QAAX,CAAoBiC,SAApB,CAAgC,WAAhC,CAA8C,IAA9D,wBACI,cAAO,OAAO,CAAC,UAAf,sBADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,cAAjC,CAAgD,WAAW,CAAC,UAA5D,CAAuE,IAAI,CAAC,UAA5E,CAAuF,QAAQ,CAAE,KAAK3C,iBAAtG,EAFJ,kBAEgI,aAAM,SAAS,CAAC,YAAhB,UAA8BY,UAAU,CAACF,QAAX,CAAoB6B,OAAlD,EAFhI,OAXJ,cAcI,aAAK,SAAS,CAAE3B,UAAU,CAAC6B,qBAAX,CAAiCE,SAAjC,CAA6C,WAA7C,CAA2D,IAA3E,wBACI,cAAO,OAAO,CAAC,uBAAf,8BADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,cAAjC,CAAgD,WAAW,CAAC,kBAA5D,CAA+E,IAAI,CAAC,uBAApF,CAA4G,QAAQ,CAAE,KAAK3C,iBAA3H,EAFJ,kBAEqJ,aAAM,SAAS,CAAC,YAAhB,UAA8BY,UAAU,CAAC6B,qBAAX,CAAiCF,OAA/D,EAFrJ,GAdJ,cAmBA,eAAQ,OAAO,CAAE,KAAK5B,gBAAtB,CAAwC,SAAS,CAAC,KAAlD,sBAnBA,GADJ,EADJ,EADJ,cA2BI,WAAG,OAAO,CAAE,KAAKuB,KAAL,CAAWC,UAAvB,CAAmC,SAAS,CAAC,aAA7C,6CAA6E,aAA7E,cA3BJ,GADJ,EADA,CAkCC,C,0BArH0B1C,S,EAuH3B,cAAeM,CAAAA,YAAf","sourcesContent":["import React, {Component} from 'react';\nimport FormValidator from '../validation/FormValidator';\nimport axios from 'axios';\nimport $ from 'jquery';\nimport{ init, send } from '@emailjs/browser';\n\nclass RegisterForm extends Component{\nconstructor(){\nsuper();\nthis.validator = new FormValidator([{\n    field: 'username',\n    method: 'isEmpty',\n    validWhen: false,\n    message: 'Enter username.'\n}, {\n    field: 'email',\n    method: 'isEmpty',\n    validWhen: false,\n    message: 'Enter your email.'\n}, {\n    field: 'password',\n    method: 'isEmpty',\n    validWhen: false,\n    message: 'Enter password.',\n    minimalScore: 4\n}, {\n    field: 'password_confirmation',\n    method: this.passwordMatch,\n    validWhen: true,\n    message: 'Enter password confirmation.'\n}\n]);\n\nthis.state = {\nusername: '',\nemail: '',\npassword: '',\npassword_confirmation: '',\nvalidation: this.validator.valid()\n}\nthis.submitted = false;\n}\n\n\n\n\nhandleInputChange = event => {\nevent.preventDefault();\nthis.setState({\n[event.target.name]: event.target.value,\n});\n}\npasswordMatch = (confirmation, state) => (state.password === confirmation);\nhandleFormSubmit = event => {\nevent.preventDefault();\nconst validation = this.validator.validate(this.state);\nthis.setState({\nvalidation\n});\nthis.submitted = true;\nif(validation.isValid) {\n\n    axios.defaults.xsrfCookieName = 'csrftoken';\n    axios.defaults.xsrfHeaderName = 'X-CSRFToken';\n\n    axios.post(`https://ce-soir-c-est-jor.com/api/api/user_register/`+ this.state.username + \"/\" + this.state.email + \"/\" + this.state.password)\n    .then(res => {\n        console.log(res);\n        if(res.data[0] !== undefined) {\n            if(res.data[0].username !== undefined) {\n                init(\"khZEel_OFdFp8l2MS\");\n                var templateParams = {\n                    username: res.data[0].username,\n                    email: res.data[0].email\n                };\n                send('service_fbwp3ta', 'template_viei73s', templateParams)\n                    .then(function(response) {\n                    console.log('SUCCESS!', response.status, response.text);\n                    }, function(error) {\n                    console.log('FAILED...', error);\n                });\n                this.props.switchForm(true);\n            }\n        }\n    })\n}\n}\nrender() {\nlet validation = this.submitted ?this.validator.validate(this.state) : this.state.validation\nreturn (\n<div>\n    <div className=\"container form_register form\">\n        <div className=\"row\"> \n            <div>\n                <form className=\"registrationForm formulaire_home\">\n                <h2>Register</h2> \n                    <div className={validation.username.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"username\">Username</label>\n                        <input type=\"string\" className=\"form-control\" name=\"username\" placeholder=\"Username\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.username.message}</span> \n                    </div>\n                    \n                    <div className={validation.email.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"email\">Email</label>\n                        <input type=\"string\" className=\"form-control\" name=\"email\" placeholder=\"Email\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.email.message}</span> \n                    </div>\n                    <div className={validation.password.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"password\">Password</label>\n                        <input type=\"password\" className=\"form-control\" placeholder=\"Password\" name=\"password\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.password.message}</span> </div>\n                    <div className={validation.password_confirmation.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"password_confirmation\">Confirm Password</label>\n                        <input type=\"password\" className=\"form-control\" placeholder=\"Confirm Password\" name=\"password_confirmation\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.password_confirmation.message}</span> \n                    </div>\n\n                <button onClick={this.handleFormSubmit} className=\"btn\"> Submit </button>\n                </form>\n                \n            </div>\n        </div>\n        <p onClick={this.props.switchForm} className=\"switch_form\">Have an account ? <br/> Sign in</p>\n    </div>\n    \n</div>\n)\n}\n}\nexport default RegisterForm;"]},"metadata":{},"sourceType":"module"}