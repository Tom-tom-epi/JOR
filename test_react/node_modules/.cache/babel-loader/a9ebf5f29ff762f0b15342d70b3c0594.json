{"ast":null,"code":"import _defineProperty from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import FormValidator from'../validation/FormValidator';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FormSpell=/*#__PURE__*/function(_Component){_inherits(FormSpell,_Component);var _super=_createSuper(FormSpell);function FormSpell(props){var _this;_classCallCheck(this,FormSpell);_this=_super.call(this,props);_this.handleInputChange=function(event){event.preventDefault();_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.handleFormSubmit=function(event){event.preventDefault();var validation=_this.validator.validate(_this.state);// console.log(validation);\n_this.setState({validation:validation});_this.submitted=true;if(validation.isValid){// console.log(\"Validated Item Form !\");\naxios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.post(\"https://ce-soir-c-est-jor.com/api/user/spell_create/\"+_this.state.spell_name+\"/\"+_this.state.spell_effect+\"/\"+_this.state.ecole+\"/\"+_this.props.id_desc+\"/\"+_this.props.id_party).then(function(res){// console.log(res);\n// this.setState({ updateInventory: !this.state.updateInventory });\n}).then(function(res){_this.props.handler();});}};_this.validator=new FormValidator([{field:'spell_name',method:'isEmpty',validWhen:false,message:'Enter spell name.'},{field:'spell_effect',method:'isEmpty',validWhen:false,message:'Enter spell effect.'},{field:'ecole',method:'isEmpty',validWhen:false,message:'Select magic school.'}]);_this.state={spell_name:'',spell_effect:'',ecole:'compétence d\\'arme',validation:_this.validator.valid(),updateInventory:true};_this.submitted=false;return _this;}_createClass(FormSpell,[{key:\"render\",value:function render(){var validation=this.submitted?this.validator.validate(this.state):this.state.validation;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container form_spell form\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"registrationForm\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"New spell\"}),/*#__PURE__*/_jsxs(\"div\",{className:validation.spell_name.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"spell_name\",children:\"Spell name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"string\",className:\"form-control\",name:\"spell_name\",placeholder:\"Spell Name\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.spell_name.message})]}),/*#__PURE__*/_jsxs(\"select\",{onChange:this.handleInputChange,name:\"ecole\",className:\"form-select\",\"aria-label\":\"Default select example\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"comp\\xE9tence d\\\\'arme\",children:\"Comp\\xE9tence d'arme\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Destruction\",children:\"Destruction\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Gu\\xE9rison\",children:\"Gu\\xE9rison\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Alteration\",children:\"Alt\\xE9ration\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Conjuration\",children:\"Conjuration\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Illusion\",children:\"Illusion\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Mysticisme\",children:\"Mysticisme\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pouvoir Sp\\xE9cial\",children:\"Pouvoir sp\\xE9cial\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:validation.spell_effect.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"spell_effect\",children:\"Spell effect\"}),/*#__PURE__*/_jsx(\"input\",{type:\"string\",className:\"form-control\",name:\"spell_effect\",placeholder:\"Spell effect\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.spell_effect.message})]}),/*#__PURE__*/_jsx(\"button\",{onClick:this.handleFormSubmit,className:\"btn btn-primary\",children:\" Create spell \"})]})})})})});}}]);return FormSpell;}(Component);export default FormSpell;","map":{"version":3,"sources":["/var/www/html/JOR/test_react/src/components/spellForm.js"],"names":["React","Component","FormValidator","axios","FormSpell","props","handleInputChange","event","preventDefault","setState","target","name","value","handleFormSubmit","validation","validator","validate","state","submitted","isValid","defaults","xsrfCookieName","xsrfHeaderName","post","spell_name","spell_effect","ecole","id_desc","id_party","then","res","handler","field","method","validWhen","message","valid","updateInventory","isInvalid"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport FormValidator from '../validation/FormValidator';\nimport axios from 'axios';\n\nclass FormSpell extends Component{\nconstructor(props){\nsuper(props);\nthis.validator = new FormValidator([{\n    field: 'spell_name',\n    method: 'isEmpty',\n    validWhen: false,\n    message: 'Enter spell name.'\n}, {\n    field: 'spell_effect',\n    method: 'isEmpty',\n    validWhen: false,\n    message: 'Enter spell effect.'\n}, {\n    field: 'ecole',\n    method: 'isEmpty',\n    validWhen: false,\n    message: 'Select magic school.'\n}\n]);\n\nthis.state = {\nspell_name: '',\nspell_effect: '',\necole: 'compétence d\\'arme',\nvalidation: this.validator.valid(),\nupdateInventory: true\n}\nthis.submitted = false;\n}\nhandleInputChange = event => {\nevent.preventDefault();\nthis.setState({\n[event.target.name]: event.target.value,\n});\n}\nhandleFormSubmit = event => {\nevent.preventDefault();\nconst validation = this.validator.validate(this.state);\n// console.log(validation);\nthis.setState({\nvalidation\n});\nthis.submitted = true;\nif(validation.isValid) {\n    // console.log(\"Validated Item Form !\");\n\n    axios.defaults.xsrfCookieName = 'csrftoken';\n    axios.defaults.xsrfHeaderName = 'X-CSRFToken';\n\n    axios.post(`https://ce-soir-c-est-jor.com/api/user/spell_create/`\n    + this.state.spell_name + \"/\" \n    + this.state.spell_effect + \"/\" \n    + this.state.ecole + \"/\" \n    + this.props.id_desc\n    + \"/\" + this.props.id_party)\n    .then(res => {\n        // console.log(res);\n        // this.setState({ updateInventory: !this.state.updateInventory });\n    }).then(res => {\n        this.props.handler();\n    })\n}\n}\nrender() {\nlet validation = this.submitted ?this.validator.validate(this.state) : this.state.validation\nreturn (\n<div>\n    <div className=\"container form_spell form\">\n        <div className=\"row\">\n            <div>\n                <form className=\"registrationForm\">\n                <h2>New spell</h2>\n                    <div className={validation.spell_name.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"spell_name\">Spell name</label>\n                        <input type=\"string\" className=\"form-control\" name=\"spell_name\" placeholder=\"Spell Name\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.spell_name.message}</span> \n                    </div>\n                    <select onChange={this.handleInputChange} name=\"ecole\" className=\"form-select\" aria-label=\"Default select example\">\n                        <option value=\"compétence d\\'arme\">Compétence d'arme</option>\n                        <option value=\"Destruction\">Destruction</option>\n                        <option value=\"Guérison\">Guérison</option>\n                        <option value=\"Alteration\">Altération</option>\n                        <option value=\"Conjuration\">Conjuration</option>\n                        <option value=\"Illusion\">Illusion</option>\n                        <option value=\"Mysticisme\">Mysticisme</option>\n                        <option value=\"Pouvoir Spécial\">Pouvoir spécial</option>\n                    </select>\n                    <div className={validation.spell_effect.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"spell_effect\">Spell effect</label>\n                        <input type=\"string\" className=\"form-control\" name=\"spell_effect\" placeholder=\"Spell effect\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.spell_effect.message}</span> \n                    </div>\n                <button onClick={this.handleFormSubmit} className=\"btn btn-primary\"> Create spell </button>\n                </form>\n            </div>\n        </div>\n    </div>\n\n</div>\n)\n}\n}\nexport default FormSpell;"]},"metadata":{},"sourceType":"module"}