{"ast":null,"code":"import _defineProperty from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import FormValidator from'../validation/FormValidator';import axios from'axios';import CardCharacters from'./cardCharacters';import $ from'jquery';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FormCharacter=/*#__PURE__*/function(_Component){_inherits(FormCharacter,_Component);var _super=_createSuper(FormCharacter);function FormCharacter(props){var _this;_classCallCheck(this,FormCharacter);_this=_super.call(this,props);_this.handleInputChange=function(event){event.preventDefault();_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.selectType=function(label_class){// console.log(label_class);\n$(\".form_check_label\").removeClass(\"active\");$(\".\"+label_class).addClass(\"active\");_this.setState({role:label_class});};_this.handleFormSubmit=function(event){event.preventDefault();var validation=_this.validator.validate(_this.state);_this.setState({validation:validation});_this.submitted=true;if(validation.isValid){// console.log(\"Validated Form !\");\naxios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.post(\"https://ce-soir-c-est-jor.com/api/:8000/api/character_create/\"+_this.state.full_name+\"/\"+_this.state.special+\"/\"+_this.state.race+\"/\"+_this.state.role+\"/\"+_this.props.id_admin+\"/\"+_this.props.id_party).then(function(res){// console.log(res);\n_this.setState({updateCard:!_this.state.updateCard});});}};_this.validator=new FormValidator([{field:'full_name',method:'isEmpty',validWhen:false,message:'Enter full name.'},{field:'special',method:'isEmpty',validWhen:false,message:'Enter spécial.'}]);_this.state={full_name:'',special:'',race:'Impérial',role:'pnj',validation:_this.validator.valid(),updateCard:true};_this.submitted=false;// console.log(this.props.id_party);\nreturn _this;}_createClass(FormCharacter,[{key:\"render\",value:function render(){var validation=this.submitted?this.validator.validate(this.state):this.state.validation;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container form_character form\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"registrationForm\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"New Character\"}),/*#__PURE__*/_jsxs(\"div\",{className:validation.full_name.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"full_name\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"string\",className:\"form-control\",name:\"full_name\",placeholder:\"Full Name\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.full_name.message})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"race\",children:\"Race\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:this.handleInputChange,name:\"race\",className:\"form-select\",\"aria-label\":\"Default select example\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Imp\\xE9rial\",children:\"Imp\\xE9rial\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Haut-Elfe\",children:\"Haut-Elfe\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Elfe des bois\",children:\"Elfe des bois\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Elfe noir\",children:\"Elfe noir\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Argonien\",children:\"Argonien\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Khajiit\",children:\"Khajiit\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Rougegarde\",children:\"Rougegarde\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Br\\xE9ton\",children:\"Br\\xE9ton\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Orc\",children:\"Orc\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Nordique\",children:\"Nordique\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Invocation\",children:\"Invocation\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Ennemi\",children:\"Ennemi\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content_form_check\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form_check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"role\",id:\"role1\",value:\"equipement\",defaultChecked:true}),/*#__PURE__*/_jsx(\"label\",{className:\"form_check_label pnj active\",htmlFor:\"role1\",onClick:this.selectType.bind(this.selectType,\"pnj\"),children:\"PNJ\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"role\",id:\"role2\",value:\"quest\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form_check_label player\",htmlFor:\"role2\",onClick:this.selectType.bind(this.selectType,\"player\"),children:\"Player\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:validation.special.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"special\",children:\"Sp\\xE9cial\"}),/*#__PURE__*/_jsx(\"input\",{type:\"string\",className:\"form-control\",name:\"special\",placeholder:\"Sp\\xE9cial\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.special.message})]}),/*#__PURE__*/_jsx(\"button\",{onClick:this.handleFormSubmit,className:\"btn btn-primary\",children:\" Register \"})]})})})}),/*#__PURE__*/_jsx(CardCharacters,{updateCard:this.state.updateCard,id_party:this.props.id_party})]});}}]);return FormCharacter;}(Component);export default FormCharacter;","map":{"version":3,"sources":["/var/www/html/JOR/test_react/src/components/FormCharacter.js"],"names":["React","Component","FormValidator","axios","CardCharacters","$","FormCharacter","props","handleInputChange","event","preventDefault","setState","target","name","value","selectType","label_class","removeClass","addClass","role","handleFormSubmit","validation","validator","validate","state","submitted","isValid","defaults","xsrfCookieName","xsrfHeaderName","post","full_name","special","race","id_admin","id_party","then","res","updateCard","field","method","validWhen","message","valid","isInvalid","bind"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport FormValidator from '../validation/FormValidator';\nimport axios from 'axios';\nimport CardCharacters from './cardCharacters';\nimport $ from 'jquery';\n\nclass FormCharacter extends Component{\nconstructor(props){\nsuper(props);\nthis.validator = new FormValidator([{\nfield: 'full_name',\nmethod: 'isEmpty',\nvalidWhen: false,\nmessage: 'Enter full name.'\n}, {\nfield: 'special',\nmethod: 'isEmpty',\nvalidWhen: false,\nmessage: 'Enter spécial.'\n}\n]);\n\nthis.state = {\nfull_name: '',\nspecial: '',\nrace: 'Impérial',\nrole: 'pnj',\nvalidation: this.validator.valid(),\nupdateCard: true\n}\nthis.submitted = false;\n// console.log(this.props.id_party);\n}\n\nhandleInputChange = event => {\nevent.preventDefault();\nthis.setState({\n[event.target.name]: event.target.value,\n});\n}\n\nselectType = (label_class) => {\n    // console.log(label_class);\n    $(\".form_check_label\").removeClass(\"active\");\n    $(\".\" + label_class).addClass(\"active\");\n    this.setState({ role: label_class });\n}\n\nhandleFormSubmit = event => {\nevent.preventDefault();\nconst validation = this.validator.validate(this.state);\nthis.setState({\nvalidation\n});\nthis.submitted = true;\nif(validation.isValid) {\n    // console.log(\"Validated Form !\");\n\n    axios.defaults.xsrfCookieName = 'csrftoken';\n    axios.defaults.xsrfHeaderName = 'X-CSRFToken';\n\n    axios.post(`https://ce-soir-c-est-jor.com/api/:8000/api/character_create/`\n    + this.state.full_name + \"/\" \n    + this.state.special + \"/\" \n    + this.state.race + \"/\"\n    + this.state.role + \"/\"\n    + this.props.id_admin\n    + \"/\" + this.props.id_party)\n    .then(res => {\n        // console.log(res);\n        this.setState({ updateCard: !this.state.updateCard });\n    })\n}\n}\nrender() {\nlet validation = this.submitted ?this.validator.validate(this.state) : this.state.validation\nreturn (\n<div>\n    <div className=\"container form_character form\">\n        <div className=\"row\">\n            <div>\n                <form className=\"registrationForm\">\n                <h2>New Character</h2>\n                    <div className={validation.full_name.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"full_name\">Full Name</label>\n                        <input type=\"string\" className=\"form-control\" name=\"full_name\" placeholder=\"Full Name\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.full_name.message}</span> \n                    </div> \n                    <label htmlFor=\"race\">Race</label>\n                    <select onChange={this.handleInputChange} name=\"race\" className=\"form-select\" aria-label=\"Default select example\">\n                        <option value=\"Impérial\">Impérial</option>\n                        <option value=\"Haut-Elfe\">Haut-Elfe</option>\n                        <option value=\"Elfe des bois\">Elfe des bois</option>\n                        <option value=\"Elfe noir\">Elfe noir</option>\n                        <option value=\"Argonien\">Argonien</option>\n                        <option value=\"Khajiit\">Khajiit</option>\n                        <option value=\"Rougegarde\">Rougegarde</option>\n                        <option value=\"Bréton\">Bréton</option>\n                        <option value=\"Orc\">Orc</option>\n                        <option value=\"Nordique\">Nordique</option>\n                        <option value=\"Invocation\">Invocation</option>\n                        <option value=\"Ennemi\">Ennemi</option>\n                    </select>\n                    <div className=\"content_form_check\">\n                        <div className=\"form_check\">\n                            <input className=\"form-check-input\" type=\"radio\" name=\"role\" id=\"role1\" value=\"equipement\" defaultChecked/>\n                            <label className=\"form_check_label pnj active\" htmlFor=\"role1\" onClick={this.selectType.bind(this.selectType, \"pnj\")}>\n                                PNJ\n                            </label>\n                        </div>\n                        <div className=\"form_check\">\n                            <input className=\"form-check-input\" type=\"radio\" name=\"role\" id=\"role2\" value=\"quest\"/>\n                            <label className=\"form_check_label player\" htmlFor=\"role2\" onClick={this.selectType.bind(this.selectType, \"player\")}>\n                                Player\n                            </label>\n                        </div>\n                    </div>\n                    <div className={validation.special.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"special\">Spécial</label>\n                        <input type=\"string\" className=\"form-control\" name=\"special\" placeholder=\"Spécial\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.special.message}</span> \n                    </div>\n                <button onClick={this.handleFormSubmit} className=\"btn btn-primary\"> Register </button>\n                </form>\n            </div>\n        </div>\n    </div>\n\n    <CardCharacters \n    updateCard={this.state.updateCard}\n    id_party={this.props.id_party}/>\n</div>\n)\n}\n}\nexport default FormCharacter;"]},"metadata":{},"sourceType":"module"}