{"ast":null,"code":"import _defineProperty from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import FormValidator from'../validation/FormValidator';import axios from'axios';import $ from'jquery';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=/*#__PURE__*/function(_Component){_inherits(LoginForm,_Component);var _super=_createSuper(LoginForm);function LoginForm(props){var _this;_classCallCheck(this,LoginForm);_this=_super.call(this,props);_this.handleInputChange=function(event){event.preventDefault();_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.passwordMatch=function(confirmation,state){return state.password===confirmation;};_this.handleFormSubmit=function(event){event.preventDefault();var validation=_this.validator.validate(_this.state);// console.log(this.props.id_desc);\n_this.setState({validation:validation});_this.submitted=true;if(validation.isValid){axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';// console.log(\"in log\");\naxios.get(\"https://ce-soir-c-est-jor.com/api/api/user_login/\"+_this.state.email+\"/\"+_this.state.password).then(function(res){if(typeof res.data.message!=='undefined'){$('.error_alert_login').addClass('displayed');}else{_this.props.getLogged(res.data.username,res.data.email,res.data.id);}});}};_this.validator=new FormValidator([{field:'email',method:'isEmpty',validWhen:false,message:'Enter your email.'},{field:'password',method:'isEmpty',validWhen:false,message:'Enter password.'}]);_this.state={email:'',password:'',validation:_this.validator.valid()};_this.submitted=false;return _this;}_createClass(LoginForm,[{key:\"render\",value:function render(){var validation=this.submitted?this.validator.validate(this.state):this.state.validation;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container form_login form\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"error_alert_login\",children:\"Email or password incorrect\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"registrationForm formulaire_home\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:validation.email.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"string\",className:\"form-control\",name:\"email\",placeholder:\"Email\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.email.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:validation.password.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Password\",name:\"password\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.password.message})]}),/*#__PURE__*/_jsx(\"button\",{onClick:this.handleFormSubmit,className:\"btn\",children:\" Submit \"})]})})}),/*#__PURE__*/_jsxs(\"p\",{onClick:this.props.switchForm,className:\"switch_form\",children:[\"New ? \",/*#__PURE__*/_jsx(\"br\",{}),\" Sign up\"]})]})});}}]);return LoginForm;}(Component);export default LoginForm;","map":{"version":3,"sources":["/var/www/html/JOR/test_react/src/components/LoginForm.js"],"names":["React","Component","FormValidator","axios","$","LoginForm","props","handleInputChange","event","preventDefault","setState","target","name","value","passwordMatch","confirmation","state","password","handleFormSubmit","validation","validator","validate","submitted","isValid","defaults","xsrfCookieName","xsrfHeaderName","get","email","then","res","data","message","addClass","getLogged","username","id","field","method","validWhen","valid","isInvalid","switchForm"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport FormValidator from '../validation/FormValidator';\nimport axios from 'axios';\nimport $ from 'jquery';\n\nclass LoginForm extends Component{\nconstructor(props){\nsuper(props);\nthis.validator = new FormValidator([\n{\n    field: 'email',\n    method: 'isEmpty',\n    validWhen: false,\n    message: 'Enter your email.'\n}, {\n    field: 'password',\n    method: 'isEmpty',\n    validWhen: false,\n    message: 'Enter password.'\n}\n]);\n\nthis.state = {\nemail: '',\npassword: '',\nvalidation: this.validator.valid()\n}\nthis.submitted = false;\n}\n\n\n\n\nhandleInputChange = event => {\nevent.preventDefault();\nthis.setState({\n[event.target.name]: event.target.value,\n});\n}\npasswordMatch = (confirmation, state) => (state.password === confirmation);\nhandleFormSubmit = event => {\nevent.preventDefault();\nconst validation = this.validator.validate(this.state);\n// console.log(this.props.id_desc);\nthis.setState({\nvalidation\n});\nthis.submitted = true;\nif(validation.isValid) {\n\n    axios.defaults.xsrfCookieName = 'csrftoken';\n    axios.defaults.xsrfHeaderName = 'X-CSRFToken';\n// console.log(\"in log\");\n    axios.get(`https://ce-soir-c-est-jor.com/api/api/user_login/`+ this.state.email + \"/\" + this.state.password)\n    .then(res => {\n        if(typeof res.data.message !== 'undefined') {\n            $('.error_alert_login').addClass('displayed');\n        }else {\n            this.props.getLogged(res.data.username, res.data.email, res.data.id);\n        }\n    })\n}\n}\nrender() {\nlet validation = this.submitted ?this.validator.validate(this.state) : this.state.validation\nreturn ( \n<div>\n    <div className=\"container form_login form\">\n        <span className=\"error_alert_login\">Email or password incorrect</span>\n        <div className=\"row\">\n            <div>\n                <form className=\"registrationForm formulaire_home\">\n                <h2>Login</h2>\n                    \n                    <div className={validation.email.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"email\">Email</label>\n                        <input type=\"string\" className=\"form-control\" name=\"email\" placeholder=\"Email\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.email.message}</span> \n                    </div>\n                    <div className={validation.password.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"password\">Password</label>\n                        <input type=\"password\" className=\"form-control\" placeholder=\"Password\" name=\"password\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.password.message}</span> \n                    </div>\n\n                <button onClick={this.handleFormSubmit} className=\"btn\"> Submit </button>\n                </form>\n                \n            </div>\n        </div>\n        <p onClick={this.props.switchForm} className=\"switch_form\">New ? <br/> Sign up</p>\n    </div>\n    \n</div>\n)\n}\n}\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}