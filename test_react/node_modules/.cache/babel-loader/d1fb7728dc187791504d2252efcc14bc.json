{"ast":null,"code":"import _classCallCheck from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import $ from'jquery';import axios from'axios';import PartyForm from'./partyForm';// import '../assets/party.css';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SelectParty=/*#__PURE__*/function(_React$Component){_inherits(SelectParty,_React$Component);var _super=_createSuper(SelectParty);function SelectParty(props){var _this;_classCallCheck(this,SelectParty);_this=_super.call(this,props);_this.handeClick=function(id){_this.props.selectParty(id);};_this.showDeleteBox=function(id){if($(\".box_delete_party_\"+id).hasClass('displayed')){$(\".box_delete_party_\"+id).removeClass('displayed');}else{$(\".box_delete_party_\"+id).addClass('displayed');}};_this.deleteParty=function(id){// console.log(\"Delete party !\" + this.props.id_admin);\naxios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.post(\"https://ce-soir-c-est-jor.com/api/api/user/delete_party\"+\"/\"+id+\"/\"+_this.props.id_user).then(function(res){// console.log(res);\n_this.setState({update:!_this.state.update});_this.showDeleteBox(id);});};_this.fetchData=function(id){axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.get(\"https://ce-soir-c-est-jor.com/api/api/user/getParties\"+\"/\"+id).then(function(res){// let result = Object.values(res.data);\n// console.log(res);\n_this.setState({parties:res.data});// return result;\n});};_this.getParties=function(){var parties=[];for(var i=0;i<_this.state.parties.length;i++){parties.push(_this.state.parties[i]);}return parties;};_this.handleClick=function(){if($(\".form_party\").hasClass(\"displayed\")){$(\".form_party\").removeClass(\"displayed\");}else{$(\".form_party\").addClass(\"displayed\");}};_this.handleUpdate=function(){_this.setState({update:!_this.state.update});};_this.handleChange=_this.handleUpdate.bind(_assertThisInitialized(_this));_this.state={parties:[],update:false};return _this;}_createClass(SelectParty,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchData(this.props.id_user);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){if(this.state.update!==prevState.update){this.fetchData(this.props.id_user);}}},{key:\"render\",value:function render(){var _this2=this;var parties=this.getParties(this.props.id_user);// console.log(parties);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"content_parties\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"block_parties\",children:parties.map(function(partie,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"box_parties\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"partie_name\",children:partie.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"partie_nbr_player\",children:[partie.nbr_player,\" players\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn_partie_delete\",onClick:_this2.showDeleteBox.bind(_this2.showDeleteBox,partie.id),children:[\"DELETE \",partie.id]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn_partie_select\",onClick:_this2.handeClick.bind(_this2.handeClick,partie.id),children:[\"Select \",partie.id]}),/*#__PURE__*/_jsx(\"div\",{className:\"box_delete box_delete_party_\"+partie.id,children:/*#__PURE__*/_jsxs(\"div\",{className:\"content_delete_party\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to delete this party ?\"}),/*#__PURE__*/_jsx(\"p\",{children:\"All the content will be lost !\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"box_btn_delete_party\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cancel_delete\",onClick:_this2.showDeleteBox.bind(_this2.showDeleteBox,partie.id),children:\"No, cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"confirm_delete\",onClick:_this2.deleteParty.bind(_this2.deleteParty,partie.id),children:\"Yes, i'm sure\"})]})]})})]},i);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"box_create_parties\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Create new party\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.handleClick.bind(this.handeClick),children:\"Create\"})]}),/*#__PURE__*/_jsx(PartyForm,{id_user:this.props.id_user,email_user:this.props.email,handleUpdate:this.handleUpdate.bind(this.handleUpdate)})]});}}]);return SelectParty;}(React.Component);export default SelectParty;","map":{"version":3,"sources":["/var/www/html/JOR/test_react/src/components/selectParty.js"],"names":["React","$","axios","PartyForm","SelectParty","props","handeClick","id","selectParty","showDeleteBox","hasClass","removeClass","addClass","deleteParty","defaults","xsrfCookieName","xsrfHeaderName","post","id_user","then","res","setState","update","state","fetchData","get","parties","data","getParties","i","length","push","handleClick","handleUpdate","handleChange","bind","prevProps","prevState","snapshot","map","partie","name","nbr_player","email","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport $ from 'jquery';\nimport axios from 'axios';\nimport PartyForm from './partyForm';\n// import '../assets/party.css';\n\nclass SelectParty extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleUpdate.bind(this);\n    this.state = {\n        parties: [],\n        update: false\n    };\n  }\n\n  componentDidMount() {\n    this.fetchData(this.props.id_user);\n  }\n  componentDidUpdate(prevProps, prevState, snapshot) {\n      if(this.state.update !== prevState.update) {\n        this.fetchData(this.props.id_user);\n      }\n  }\n  \n  handeClick = (id) => {\n    this.props.selectParty(id);\n  }\n\n  showDeleteBox = (id) => {\n      if($(\".box_delete_party_\" + id).hasClass('displayed')) {\n            $(\".box_delete_party_\" + id).removeClass('displayed');\n      }else {\n          $(\".box_delete_party_\" + id).addClass('displayed');\n      }\n  }\n\n  deleteParty = (id) => {\n      // console.log(\"Delete party !\" + this.props.id_admin);\n      axios.defaults.xsrfCookieName = 'csrftoken'\n        axios.defaults.xsrfHeaderName = 'X-CSRFToken'\n\n    axios.post(`https://ce-soir-c-est-jor.com/api/api/user/delete_party` + `/` + id + `/` + this.props.id_user)\n      .then(res => {\n        // console.log(res);\n        this.setState({ update: !this.state.update }); \n        this.showDeleteBox(id);\n    })\n  }\n\n\n  fetchData = (id) => {\n    axios.defaults.xsrfCookieName = 'csrftoken'\n    axios.defaults.xsrfHeaderName = 'X-CSRFToken'\n\n    axios.get(`https://ce-soir-c-est-jor.com/api/api/user/getParties` + `/` + id)\n      .then(res => {\n        // let result = Object.values(res.data);\n        // console.log(res);\n        this.setState({ parties: res.data }); \n        // return result;\n    })\n  } \n\n  getParties = () => {\n    var parties = [];\n    for(let i = 0; i < this.state.parties.length; i++) {\n     parties.push(this.state.parties[i]);\n    }\n    return (\n      parties\n    )\n  }\n\n  handleClick = () => {\n      if($(\".form_party\").hasClass(\"displayed\")) {\n        $(\".form_party\").removeClass(\"displayed\");\n      }else {\n        $(\".form_party\").addClass(\"displayed\");\n      }\n\n  }\n\n  handleUpdate = () => {\n    this.setState({ update: !this.state.update }); \n  }\n  \n    render() {\n    var parties = this.getParties(this.props.id_user);\n    // console.log(parties);\n        return (\n            <div className=\"content_parties\">\n              <div className=\"block_parties\">\n                {parties.map((partie, i) => {\n                    return (\n                    <div key={i} className=\"box_parties\">\n                        <p className=\"partie_name\">{partie.name}</p>\n                        <p className=\"partie_nbr_player\">{partie.nbr_player} players</p>\n                        <button className=\"btn_partie_delete\" onClick={this.showDeleteBox.bind(this.showDeleteBox, partie.id)}>DELETE {partie.id}</button>\n                        <button className=\"btn_partie_select\" onClick={this.handeClick.bind(this.handeClick, partie.id)}>Select {partie.id}</button>\n                        \n\n                        <div className={\"box_delete box_delete_party_\" + partie.id }>\n                            <div className=\"content_delete_party\">\n                                <p>Are you sure you want to delete this party ?</p>\n                                <p>All the content will be lost !</p>\n                                <div className=\"box_btn_delete_party\">\n                                    <button className=\"cancel_delete\" onClick={this.showDeleteBox.bind(this.showDeleteBox, partie.id)}>No, cancel</button>\n                                    <button className=\"confirm_delete\" onClick={this.deleteParty.bind(this.deleteParty, partie.id)}>Yes, i'm sure</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )})}\n              </div>\n            <div className=\"box_create_parties\">\n                <div>Create new party</div>\n                <button onClick={this.handleClick.bind(this.handeClick)}>Create</button>\n            </div>\n\n            \n            \n            <PartyForm \n            id_user={this.props.id_user} \n            email_user={this.props.email} \n            handleUpdate={this.handleUpdate.bind(this.handleUpdate)}/>\n\n            </div>\n        );\n    }\n  }\n\nexport default SelectParty;"]},"metadata":{},"sourceType":"module"}