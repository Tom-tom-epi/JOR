{"ast":null,"code":"import _defineProperty from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import FormValidator from'../validation/FormValidator';import axios from'axios';import $ from'jquery';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FormItem=/*#__PURE__*/function(_Component){_inherits(FormItem,_Component);var _super=_createSuper(FormItem);function FormItem(props){var _this;_classCallCheck(this,FormItem);_this=_super.call(this,props);_this.handleInputChange=function(event){event.preventDefault();_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.selectType=function(label_class){$(\".form_check_label\").removeClass(\"active\");$(\".\"+label_class).addClass(\"active\");_this.setState({type_object:label_class});};_this.handleFormSubmit=function(event){event.preventDefault();var validation=_this.validator.validate(_this.state);// console.log(this.props.id_desc);\n_this.setState({validation:validation});_this.submitted=true;if(validation.isValid){// console.log(\"Validated Item Form !\");\naxios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.post(\"https://ce-soir-c-est-jor.com/api/api/user/item_create/\"+_this.state.item_name+\"/\"+_this.state.item_effect+\"/\"+_this.state.type_object+\"/\"+_this.props.id_desc+\"/\"+_this.state.item_nbr+\"/\"+_this.props.id_party).then(function(res){// console.log(res);\n_this.setState({updateInventory:!_this.state.updateInventory});}).then(function(res){_this.props.handler();});}};_this.validator=new FormValidator([{field:'item_name',method:'isEmpty',validWhen:false,message:'Enter item name.'},{field:'item_effect',method:'isEmpty',validWhen:false,message:'Enter item effect.'},{field:'item_nbr',method:'isEmpty',validWhen:false,message:'Enter item nbr.'}]);_this.state={item_name:'',item_effect:'',item_nbr:1,type_object:'equipement',validation:_this.validator.valid(),updateInventory:true};_this.submitted=false;return _this;}_createClass(FormItem,[{key:\"render\",value:function render(){var validation=this.submitted?this.validator.validate(this.state):this.state.validation;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container form_item form\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"registrationForm\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"New item\"}),/*#__PURE__*/_jsxs(\"div\",{className:validation.item_name.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"item_name\",children:\"Item name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"string\",className:\"form-control\",name:\"item_name\",placeholder:\"Item Name\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.item_name.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content_form_check\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form_check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"type_object\",id:\"type_object1\",value:\"equipement\",defaultChecked:true}),/*#__PURE__*/_jsx(\"label\",{className:\"form_check_label equipement active\",htmlFor:\"type_object1\",onClick:this.selectType.bind(this.selectType,\"equipement\"),children:\"Equipement\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"type_object\",id:\"type_object2\",value:\"quest\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form_check_label quest\",htmlFor:\"type_object2\",onClick:this.selectType.bind(this.selectType,\"quest\"),children:\"Quest\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:validation.item_effect.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"item_effect\",children:\"Item effect\"}),/*#__PURE__*/_jsx(\"input\",{type:\"string\",className:\"form-control\",name:\"item_effect\",placeholder:\"Item effect\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.item_effect.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:validation.item_nbr.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"item_nbr\",children:\"Item nbr\"}),/*#__PURE__*/_jsx(\"input\",{type:\"integer\",className:\"form-control\",name:\"item_nbr\",placeholder:\"Item nbr\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.item_nbr.message})]}),/*#__PURE__*/_jsx(\"button\",{onClick:this.handleFormSubmit,className:\"btn btn-primary\",children:\" Create item \"})]})})})})});}}]);return FormItem;}(Component);export default FormItem;","map":{"version":3,"sources":["/var/www/html/JOR/test_react/src/components/itemForm.js"],"names":["React","Component","FormValidator","axios","$","FormItem","props","handleInputChange","event","preventDefault","setState","target","name","value","selectType","label_class","removeClass","addClass","type_object","handleFormSubmit","validation","validator","validate","state","submitted","isValid","defaults","xsrfCookieName","xsrfHeaderName","post","item_name","item_effect","id_desc","item_nbr","id_party","then","res","updateInventory","handler","field","method","validWhen","message","valid","isInvalid","bind"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport FormValidator from '../validation/FormValidator';\nimport axios from 'axios';\nimport $ from 'jquery';\n\nclass FormItem extends Component{\nconstructor(props){\nsuper(props);\nthis.validator = new FormValidator([{\n    field: 'item_name',\n    method: 'isEmpty',\n    validWhen: false,\n    message: 'Enter item name.'\n}, {\n    field: 'item_effect',\n    method: 'isEmpty',\n    validWhen: false,\n    message: 'Enter item effect.'\n}, {\n    field: 'item_nbr',\n    method: 'isEmpty',\n    validWhen: false,\n    message: 'Enter item nbr.'\n}\n]);\n\nthis.state = {\nitem_name: '',\nitem_effect: '',\nitem_nbr: 1,\ntype_object: 'equipement',\nvalidation: this.validator.valid(),\nupdateInventory: true\n}\nthis.submitted = false;\n}\nhandleInputChange = event => {\nevent.preventDefault();\nthis.setState({\n[event.target.name]: event.target.value,\n});\n}\nselectType = (label_class) => {\n    $(\".form_check_label\").removeClass(\"active\");\n    $(\".\" + label_class).addClass(\"active\");\n    this.setState({ type_object: label_class });\n}\nhandleFormSubmit = event => {\nevent.preventDefault();\nconst validation = this.validator.validate(this.state);\n// console.log(this.props.id_desc);\nthis.setState({\nvalidation\n});\nthis.submitted = true;\nif(validation.isValid) {\n    // console.log(\"Validated Item Form !\");\n\n    axios.defaults.xsrfCookieName = 'csrftoken';\n    axios.defaults.xsrfHeaderName = 'X-CSRFToken';\n\n    axios.post(`https://ce-soir-c-est-jor.com/api/api/user/item_create/`\n    + this.state.item_name + \"/\" \n    + this.state.item_effect + \"/\" \n    + this.state.type_object + \"/\" \n    + this.props.id_desc + \"/\" \n    + this.state.item_nbr\n    + \"/\" + this.props.id_party)\n    .then(res => {\n        // console.log(res);\n        this.setState({ updateInventory: !this.state.updateInventory });\n    }).then(res => {\n        this.props.handler();\n    })\n}\n}\nrender() {\nlet validation = this.submitted ?this.validator.validate(this.state) : this.state.validation\nreturn (\n<div>\n    <div className=\"container form_item form\">\n        <div className=\"row\">\n            <div>\n                <form className=\"registrationForm\">\n                <h2>New item</h2>\n                    <div className={validation.item_name.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"item_name\">Item name</label>\n                        <input type=\"string\" className=\"form-control\" name=\"item_name\" placeholder=\"Item Name\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.item_name.message}</span> \n                    </div>\n                    <div className=\"content_form_check\">\n                        <div className=\"form_check\">\n                            <input className=\"form-check-input\" type=\"radio\" name=\"type_object\" id=\"type_object1\" value=\"equipement\" defaultChecked/>\n                            <label className=\"form_check_label equipement active\" htmlFor=\"type_object1\" onClick={this.selectType.bind(this.selectType, \"equipement\")}>\n                                Equipement\n                            </label>\n                        </div>\n                        <div className=\"form_check\">\n                            <input className=\"form-check-input\" type=\"radio\" name=\"type_object\" id=\"type_object2\" value=\"quest\"/>\n                            <label className=\"form_check_label quest\" htmlFor=\"type_object2\" onClick={this.selectType.bind(this.selectType, \"quest\")}>\n                                Quest\n                            </label>\n                        </div>\n                    </div>\n                    <div className={validation.item_effect.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"item_effect\">Item effect</label>\n                        <input type=\"string\" className=\"form-control\" name=\"item_effect\" placeholder=\"Item effect\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.item_effect.message}</span> \n                    </div>\n                    <div className={validation.item_nbr.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"item_nbr\">Item nbr</label>\n                        <input type=\"integer\" className=\"form-control\" name=\"item_nbr\" placeholder=\"Item nbr\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.item_nbr.message}</span> \n                    </div>\n                <button onClick={this.handleFormSubmit} className=\"btn btn-primary\"> Create item </button>\n                </form>\n            </div>\n        </div>\n    </div>\n\n</div>\n)\n}\n}\nexport default FormItem;"]},"metadata":{},"sourceType":"module"}