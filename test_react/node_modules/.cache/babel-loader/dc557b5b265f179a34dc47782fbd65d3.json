{"ast":null,"code":"import _defineProperty from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import FormValidator from'../validation/FormValidator';import axios from'axios';import $ from'jquery';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FormItem=/*#__PURE__*/function(_Component){_inherits(FormItem,_Component);var _super=_createSuper(FormItem);function FormItem(props){var _this;_classCallCheck(this,FormItem);_this=_super.call(this,props);_this.handleInputChange=function(event){event.preventDefault();_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.selectType=function(label_class){$(\".form_check_label\").removeClass(\"active\");$(\".\"+label_class).addClass(\"active\");};_this.handleFormSubmit=function(event){event.preventDefault();var validation=_this.validator.validate(_this.state);// console.log(this.props.id_desc);\n_this.setState({validation:validation});_this.submitted=true;if(validation.isValid){document.getElementById('form_base_item_reset').reset();axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.post(\"https://ce-soir-c-est-jor.com:8000/api/user/item_create/\"+_this.state.item_name+\"/\"+_this.state.item_effect+\"/\"+_this.state.type_object+\"/\"+_this.props.id_desc+\"/\"+_this.state.item_nbr+\"/\"+_this.props.id_party).then(function(res){// console.log(res);\n_this.setState({updateListItem:!_this.state.updateListItem});}).then(function(res){_this.props.handler();});}};_this.validator=new FormValidator([{field:'item_name',method:'isEmpty',validWhen:false,message:'Enter item name.'},{field:'item_effect',method:'isEmpty',validWhen:false,message:'Enter item effect.'},{field:'item_nbr',method:'isEmpty',validWhen:false,message:'Enter item nbr.'}]);_this.state={item_name:'',item_effect:'',item_nbr:1,type_object:'equipement',validation:_this.validator.valid(),updateListItem:true};_this.submitted=false;return _this;}_createClass(FormItem,[{key:\"render\",value:function render(){var validation=this.submitted?this.validator.validate(this.state):this.state.validation;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container form_base_item form\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{id:\"form_base_item_reset\",className:\"registrationForm\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"New item\"}),/*#__PURE__*/_jsxs(\"div\",{className:validation.item_name.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"item_name\",children:\"Item name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"string\",className:\"form-control\",name:\"item_name\",placeholder:\"Item Name\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.item_name.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content_form_check\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form_check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"type_object\",id:\"type_object1\",value:\"equipement\",defaultChecked:true}),/*#__PURE__*/_jsx(\"label\",{className:\"form_check_label label_equip active\",htmlFor:\"type_object1\",onClick:this.selectType.bind(this.selectType,\"label_equip\"),children:\"Equipement\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"type_object\",id:\"type_object2\",value:\"quest\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form_check_label label_quest\",htmlFor:\"type_object2\",onClick:this.selectType.bind(this.selectType,\"label_quest\"),children:\"Quest\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:validation.item_effect.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"item_effect\",children:\"Item effect\"}),/*#__PURE__*/_jsx(\"input\",{type:\"string\",className:\"form-control\",name:\"item_effect\",placeholder:\"Item effect\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.item_effect.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:validation.item_nbr.isInvalid?'has-error':null,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"item_nbr\",children:\"Item nbr\"}),/*#__PURE__*/_jsx(\"input\",{type:\"integer\",className:\"form-control\",name:\"item_nbr\",placeholder:\"Item nbr\",onChange:this.handleInputChange}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:validation.item_nbr.message})]}),/*#__PURE__*/_jsx(\"button\",{onClick:this.handleFormSubmit,className:\"btn btn-primary\",children:\" Create item \"})]})})})})});}}]);return FormItem;}(Component);export default FormItem;","map":{"version":3,"sources":["/var/www/html/JOR/test_react/src/components/itemBaseForm.js"],"names":["React","Component","FormValidator","axios","$","FormItem","props","handleInputChange","event","preventDefault","setState","target","name","value","selectType","label_class","removeClass","addClass","handleFormSubmit","validation","validator","validate","state","submitted","isValid","document","getElementById","reset","defaults","xsrfCookieName","xsrfHeaderName","post","item_name","item_effect","type_object","id_desc","item_nbr","id_party","then","res","updateListItem","handler","field","method","validWhen","message","valid","isInvalid","bind"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport FormValidator from '../validation/FormValidator';\nimport axios from 'axios';\nimport $ from 'jquery';\n\nclass FormItem extends Component{\nconstructor(props){\nsuper(props);\nthis.validator = new FormValidator([{\n    field: 'item_name',\n    method: 'isEmpty',\n    validWhen: false,\n    message: 'Enter item name.'\n}, {\n    field: 'item_effect',\n    method: 'isEmpty',\n    validWhen: false,\n    message: 'Enter item effect.'\n}, {\n    field: 'item_nbr',\n    method: 'isEmpty',\n    validWhen: false,\n    message: 'Enter item nbr.'\n}\n]);\n\nthis.state = {\nitem_name: '',\nitem_effect: '',\nitem_nbr: 1,\ntype_object: 'equipement',\nvalidation: this.validator.valid(),\nupdateListItem: true\n}\nthis.submitted = false;\n}\nhandleInputChange = event => {\nevent.preventDefault();\nthis.setState({\n[event.target.name]: event.target.value,\n});\n}\nselectType = (label_class) => {\n    $(\".form_check_label\").removeClass(\"active\");\n    $(\".\" + label_class).addClass(\"active\");\n}\nhandleFormSubmit = event => {\nevent.preventDefault();\nconst validation = this.validator.validate(this.state);\n// console.log(this.props.id_desc);\nthis.setState({\nvalidation\n});\nthis.submitted = true;\nif(validation.isValid) {\n    document.getElementById('form_base_item_reset').reset();\n    axios.defaults.xsrfCookieName = 'csrftoken';\n    axios.defaults.xsrfHeaderName = 'X-CSRFToken';\n\n    axios.post(`https://ce-soir-c-est-jor.com:8000/api/user/item_create/`\n    + this.state.item_name + \"/\" \n    + this.state.item_effect + \"/\" \n    + this.state.type_object + \"/\" \n    + this.props.id_desc + \"/\" \n    + this.state.item_nbr\n    + \"/\" + this.props.id_party)\n    .then(res => {\n        // console.log(res);\n        this.setState({ \n            updateListItem: !this.state.updateListItem\n     });\n     \n    }).then(res => {\n        this.props.handler();\n    })\n}\n}\nrender() {\nlet validation = this.submitted ?this.validator.validate(this.state) : this.state.validation\nreturn (\n<div>\n    <div className=\"container form_base_item form\">\n        <div className=\"row\">\n            <div>\n                <form id=\"form_base_item_reset\" className=\"registrationForm\">\n                <h2>New item</h2>\n                    <div className={validation.item_name.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"item_name\">Item name</label>\n                        <input type=\"string\" className=\"form-control\" name=\"item_name\" placeholder=\"Item Name\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.item_name.message}</span> \n                    </div>\n                    <div className=\"content_form_check\">\n                        <div className=\"form_check\">\n                            <input className=\"form-check-input\" type=\"radio\" name=\"type_object\" id=\"type_object1\" value=\"equipement\" defaultChecked/>\n                            <label className=\"form_check_label label_equip active\" htmlFor=\"type_object1\" onClick={this.selectType.bind(this.selectType, \"label_equip\")}>\n                                Equipement\n                            </label>\n                        </div>\n                        <div className=\"form_check\">\n                            <input className=\"form-check-input\" type=\"radio\" name=\"type_object\" id=\"type_object2\" value=\"quest\"/>\n                            <label className=\"form_check_label label_quest\" htmlFor=\"type_object2\" onClick={this.selectType.bind(this.selectType, \"label_quest\")}>\n                                Quest\n                            </label>\n                        </div>\n                    </div>\n                    <div className={validation.item_effect.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"item_effect\">Item effect</label>\n                        <input type=\"string\" className=\"form-control\" name=\"item_effect\" placeholder=\"Item effect\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.item_effect.message}</span> \n                    </div>\n                    <div className={validation.item_nbr.isInvalid ? 'has-error' : null}>\n                        <label htmlFor=\"item_nbr\">Item nbr</label>\n                        <input type=\"integer\" className=\"form-control\" name=\"item_nbr\" placeholder=\"Item nbr\" onChange={this.handleInputChange} /> <span className=\"help-block\">{validation.item_nbr.message}</span> \n                    </div>\n                <button onClick={this.handleFormSubmit} className=\"btn btn-primary\"> Create item </button>\n                </form>\n            </div>\n        </div>\n    </div>\n\n</div>\n)\n}\n}\nexport default FormItem;"]},"metadata":{},"sourceType":"module"}