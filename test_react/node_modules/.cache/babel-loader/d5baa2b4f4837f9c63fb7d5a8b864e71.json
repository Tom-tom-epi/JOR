{"ast":null,"code":"import _classCallCheck from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/var/www/html/JOR/test_react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import axios from'axios';import FormItem from'./itemForm';import FormBaseItem from'./itemBaseForm';import FormSpell from'./spellForm';import FormStats from'./statsForm';import FormCaract from'./caractForm';import $ from'jquery';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Description=/*#__PURE__*/function(_React$Component){_inherits(Description,_React$Component);var _super=_createSuper(Description);function Description(props){var _this;_classCallCheck(this,Description);_this=_super.call(this,props);_this.getItems=function(){var listItems=[];for(var i=0;i<_this.state.items.length;i++){listItems.push(_this.state.items[i]);}return listItems;};_this.getSpells=function(){var listSpells=[];for(var i=0;i<_this.state.spells.length;i++){listSpells.push(_this.state.spells[i]);}return listSpells;};_this.getBaseItems=function(){var listBaseItems=[];for(var i=0;i<_this.state.listBaseItems.length;i++){listBaseItems.push(_this.state.listBaseItems[i]);}return listBaseItems;};_this.displayInventory=function(){if(_this.state.displayInventory){return false;}else{$(\".btn_inventory_spell\").removeClass('used');$(\".btn_box_inventory\").addClass('used');_this.setState({displayInventory:!_this.state.displayInventory,displaySpells:!_this.state.displaySpells});}};_this.displaySpells=function(){if(_this.state.displaySpells){return false;}else{// console.log(this.state.currentUser);\n$(\".btn_inventory_spell\").removeClass('used');$(\".btn_box_spells\").addClass('used');_this.setState({displayInventory:!_this.state.displayInventory,displaySpells:!_this.state.displaySpells});}};_this.deleteItem=function(id,nbr,id_player){// console.log(id_player);\nif(nbr==1){// alert(nbr);\naxios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.post(\"https://ce-soir-c-est-jor.com/api/api/user/deleteItem/\"+id_player+\"/\"+id+\"/\"+_this.props.id_party).then(function(res){_this.setState({update:!_this.state.update});});}else{// alert(nbr);\naxios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.post(\"https://ce-soir-c-est-jor.com/api/api/user/subItem/\"+id_player+\"/\"+id+\"/\"+nbr+\"/\"+_this.props.id_party).then(function(res){_this.setState({update:!_this.state.update});// console.log(res);\n});}};_this.addBaseItem=function(id){axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.post(\"https://ce-soir-c-est-jor.com/api/api/user/addItemFromList/\"+_this.props.id_desc+\"/\"+id+\"/\"+_this.props.id_party).then(function(res){_this.setState({update:!_this.state.update});});};_this.handler=_this.handler.bind(_assertThisInitialized(_this));_this.handlerStats=_this.handlerStats.bind(_assertThisInitialized(_this));_this.state={spells:[],items:[],currentUser:[],update:false,displayInventory:true,displaySpells:false,passif:\"\",malus:\"\",listBaseItems:[]};// console.log(this.props.id_party);\nreturn _this;}// Get the change from statsForm, then update and call the parent GroupActif.\n_createClass(Description,[{key:\"handlerStats\",value:function handlerStats(){this.props.handlerGroup();$(\".form\").removeClass(\"displayed\");}},{key:\"handler\",value:function handler(){this.setState({update:!this.state.update});}},{key:\"fetchData\",value:function fetchData(){var _this2=this;axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.get(\"https://ce-soir-c-est-jor.com/api/api/user/getSpells/\"+this.props.id_desc+\"/\"+this.props.id_party).then(function(res){//   Update self\n//   And update the group (child component)\n_this2.setState({spells:res.data});// console.log(this.state.spells);      \n});axios.get(\"https://ce-soir-c-est-jor.com/api/api/user/getInventory/\"+this.props.id_desc+\"/\"+this.props.id_party).then(function(res){//   Update self\n//   And update the group (child component)\n_this2.setState({items:res.data});// console.log(this.state.items);         \n});axios.get(\"https://ce-soir-c-est-jor.com/api/api/users/getListItems/0/\"+this.props.id_party).then(function(res){//   Update self\n//   And update the group (child component)\n_this2.setState({listBaseItems:res.data});// console.log(this.state.listBaseItems);         \n});}},{key:\"getCurrentUser\",value:function getCurrentUser(){var _this3=this;this.props.users.forEach(function(element){if(element['id_player']==_this3.props.id_desc){var currentUser=Object.entries(element);// console.log(currentUser);\nvar array=[];for(var i=0;i<currentUser.length;i++){if(currentUser[i][0]==\"health\"||currentUser[i][0]==\"mana\"||currentUser[i][0]==\"maxHealth\"||currentUser[i][0]==\"maxMana\"||currentUser[i][0]==\"Physique\"||currentUser[i][0]==\"Mental\"||currentUser[i][0]==\"Social\"){array[currentUser[i][0]]=currentUser[i][1];}else if(currentUser[i][0]==\"Passif\"){_this3.setState({passif:currentUser[i][1]});}else if(currentUser[i][0]==\"Malus\"){_this3.setState({malus:currentUser[i][1]});}}_this3.setState({currentUser:array},function(){// console.log(this.state.currentUser['Mental']);\n});}});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){// Update the component if parent state is updated\nif(this.props.id_desc!==prevProps.id_desc||this.state.update!==prevState.update){this.fetchData();this.getCurrentUser();}}},{key:\"componentDidMount\",value:function componentDidMount(){this.fetchData();this.getScripts();this.getCurrentUser();}},{key:\"getScripts\",value:function getScripts(){var button_form_item=document.getElementsByClassName('btn_form_item');var button_form_spell=document.getElementsByClassName('btn_form_spell');var form_item=document.getElementsByClassName('form_item');var form_spell=document.getElementsByClassName('form_spell');var form_stats=document.getElementsByClassName('form_stats');var form_caract=document.getElementsByClassName('form_caract');var card_group=document.getElementsByClassName('char_card');var forms=document.getElementsByClassName('form');var button_form_stats=document.getElementsByClassName('btn_form_stats');var button_form_caract=document.getElementsByClassName('btn_form_caract');var button_show_item=document.getElementsByClassName('btn_show_item');var list_items=document.getElementsByClassName('list_items');var btn_form_base_item=document.getElementsByClassName('btn_form_base_item');var form_base_item=document.getElementsByClassName('form_base_item');$(btn_form_base_item).on('click',function(){if($(form_base_item).hasClass(\"displayed\")){$(form_base_item).removeClass(\"displayed\");}else{$(forms).removeClass(\"displayed\");$(form_base_item).addClass(\"displayed\");}});$(button_show_item).on('click',function(){if($(list_items).hasClass(\"displayed\")){$(list_items).removeClass(\"displayed\");}else{$(list_items).addClass(\"displayed\");}});$(button_form_item).on('click',function(){if($(form_item).hasClass(\"displayed\")){$(form_item).removeClass(\"displayed\");}else{$(forms).removeClass(\"displayed\");$(form_item).addClass(\"displayed\");}});$(button_form_caract).on('click',function(){if($(form_caract).hasClass(\"displayed\")){$(form_caract).removeClass(\"displayed\");}else{$(forms).removeClass(\"displayed\");$(form_caract).addClass(\"displayed\");}});$(button_form_stats).on('click',function(){if($(form_stats).hasClass(\"displayed\")){$(form_stats).removeClass(\"displayed\");}else{$(forms).removeClass(\"displayed\");$(form_stats).addClass(\"displayed\");}});$(card_group).on('click',function(){$(forms).removeClass(\"displayed\");});$(button_form_spell).on('click',function(){if($(form_spell).hasClass(\"displayed\")){$(form_spell).removeClass(\"displayed\");}else{$(forms).removeClass(\"displayed\");$(form_spell).addClass(\"displayed\");}});}},{key:\"render\",value:function render(){var _this4=this;var items=this.getItems();var spells=this.getSpells();var baseItems=this.getBaseItems();return/*#__PURE__*/_jsxs(\"div\",{className:\"description\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"box_btn\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn_form_desc btn_form_stats\",children:\"Change stats\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn_form_desc btn_form_caract\",children:\"Change caract\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn_form_desc btn_form_item\",children:\"Add item\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn_form_desc btn_form_spell\",children:\"Add spell\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn_form_desc btn_show_item\",children:\"Show Items\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"box_btn_inventory_spells\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn_inventory_spell btn_box_inventory used\",onClick:this.displayInventory.bind(this.displayInventory),children:\"Inventory\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn_inventory_spell btn_box_spells\",onClick:this.displaySpells.bind(this.displaySpells),children:\"Spells\"})]}),this.state.displayInventory?/*#__PURE__*/_jsx(\"div\",{className:\"item_content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"box_item_content\",children:items.map(function(item,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"item_box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"btn_close\",onClick:_this4.deleteItem.bind(_this4.deleteItem,item.id,item.nbr,item.id_player),children:/*#__PURE__*/_jsx(\"span\",{className:\"content_btn_close\",children:\"x\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"item_name\",children:item.itemName}),/*#__PURE__*/_jsx(\"div\",{className:\"item_effect\",children:item.itemEffect}),/*#__PURE__*/_jsxs(\"div\",{className:\"item_nbr\",children:[\"( \",item.nbr,\" )\"]})]},i);})})}):null,this.state.displaySpells?/*#__PURE__*/_jsx(\"div\",{className:\"spell_content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"box_spell_content\",children:spells.map(function(spell,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"spell_box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spell_name\",children:spell.spellName}),/*#__PURE__*/_jsx(\"div\",{className:\"spell_effect\",children:spell.spellEffect})]},i);})})}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"content_passif_malus\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"box_passif\",children:this.state.passif}),/*#__PURE__*/_jsx(\"div\",{className:\"box_malus\",children:this.state.malus})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"list_items\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn_form_base_item\",children:\"Add Item\"}),/*#__PURE__*/_jsx(\"div\",{className:\"content_list_items\",children:baseItems.map(function(item,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"item_box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"btn_add_item_from_list\",onClick:_this4.addBaseItem.bind(_this4.addBaseItem,item.id),children:\"+\"}),/*#__PURE__*/_jsx(\"div\",{className:\"btn_close\",onClick:_this4.deleteItem.bind(_this4.deleteItem,item.id,item.nbr,item.id_player),children:/*#__PURE__*/_jsx(\"span\",{className:\"content_btn_close\",children:\"x\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"item_name\",children:item.itemName}),/*#__PURE__*/_jsx(\"div\",{className:\"item_effect\",children:item.itemEffect}),/*#__PURE__*/_jsxs(\"div\",{className:\"item_nbr\",children:[\"( \",item.nbr,\" )\"]})]},i);})})]}),/*#__PURE__*/_jsx(FormBaseItem,{id_desc:0,handler:this.handler,id_party:this.props.id_party}),/*#__PURE__*/_jsx(FormItem,{id_desc:this.props.id_desc,handler:this.handler,id_party:this.props.id_party}),/*#__PURE__*/_jsx(FormSpell,{id_desc:this.props.id_desc,handler:this.handler,id_party:this.props.id_party}),/*#__PURE__*/_jsx(FormStats,{id_desc:this.props.id_desc,handlerStats:this.handlerStats,health:this.state.currentUser['health'],maxHealth:this.state.currentUser['maxHealth'],mana:this.state.currentUser['mana'],maxMana:this.state.currentUser['maxMana'],id_party:this.props.id_party}),/*#__PURE__*/_jsx(FormCaract,{id_desc:this.props.id_desc,handlerStats:this.handlerStats,physic:this.state.currentUser['Physique'],mental:this.state.currentUser['Mental'],social:this.state.currentUser['Social'],id_party:this.props.id_party})]});}}]);return Description;}(React.Component);export default Description;","map":{"version":3,"sources":["/var/www/html/JOR/test_react/src/components/description.js"],"names":["React","axios","FormItem","FormBaseItem","FormSpell","FormStats","FormCaract","$","Description","props","getItems","listItems","i","state","items","length","push","getSpells","listSpells","spells","getBaseItems","listBaseItems","displayInventory","removeClass","addClass","setState","displaySpells","deleteItem","id","nbr","id_player","defaults","xsrfCookieName","xsrfHeaderName","post","id_party","then","res","update","addBaseItem","id_desc","handler","bind","handlerStats","currentUser","passif","malus","handlerGroup","get","data","users","forEach","element","Object","entries","array","prevProps","prevState","snapshot","fetchData","getCurrentUser","getScripts","button_form_item","document","getElementsByClassName","button_form_spell","form_item","form_spell","form_stats","form_caract","card_group","forms","button_form_stats","button_form_caract","button_show_item","list_items","btn_form_base_item","form_base_item","on","hasClass","baseItems","map","item","itemName","itemEffect","spell","spellName","spellEffect","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport FormItem from './itemForm';\nimport FormBaseItem from './itemBaseForm';\nimport FormSpell from './spellForm';\nimport FormStats from './statsForm';\nimport FormCaract from './caractForm';\nimport $ from 'jquery';\n\nclass Description extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handler = this.handler.bind(this);\n    this.handlerStats = this.handlerStats.bind(this);\n    this.state = {\n      spells: [],\n      items: [],\n      currentUser: [],\n      update: false,\n      displayInventory: true,\n      displaySpells: false,\n      passif: \"\",\n      malus: \"\",\n      listBaseItems: []\n    };\n    // console.log(this.props.id_party);\n  }\n\n// Get the change from statsForm, then update and call the parent GroupActif.\n  handlerStats() {\n    this.props.handlerGroup();\n    $(\".form\").removeClass(\"displayed\");\n  }\n\n  handler() {\n    this.setState({\n      update: !this.state.update\n    })\n  }\n  \n  fetchData() {\n    axios.defaults.xsrfCookieName = 'csrftoken';\n    axios.defaults.xsrfHeaderName = 'X-CSRFToken';\n\n    axios.get(`https://ce-soir-c-est-jor.com/api/api/user/getSpells/`+ this.props.id_desc + \"/\" + this.props.id_party)\n    .then(res => {\n      //   Update self\n      //   And update the group (child component)\n      this.setState({ spells: res.data });  \n      // console.log(this.state.spells);      \n    })\n    axios.get(`https://ce-soir-c-est-jor.com/api/api/user/getInventory/`+ this.props.id_desc + \"/\" + this.props.id_party)\n      .then(res => {\n        //   Update self\n        //   And update the group (child component)\n        this.setState({ items: res.data });\n        // console.log(this.state.items);         \n    })\n\n    axios.get(`https://ce-soir-c-est-jor.com/api/api/users/getListItems/0/` + this.props.id_party)\n      .then(res => {\n        //   Update self\n        //   And update the group (child component)\n        this.setState({ listBaseItems: res.data });\n        // console.log(this.state.listBaseItems);         \n    })\n  }\n\n  getCurrentUser() {\n    this.props.users.forEach(element => {\n        if(element['id_player'] == this.props.id_desc) {\n          let currentUser = Object.entries(element);\n          // console.log(currentUser);\n          let array = [];\n          for(let i = 0; i < currentUser.length; i++) {\n            if(currentUser[i][0] == \"health\" || currentUser[i][0] == \"mana\"\n            || currentUser[i][0] == \"maxHealth\" || currentUser[i][0] == \"maxMana\"\n            || currentUser[i][0] == \"Physique\" || currentUser[i][0] == \"Mental\"\n            || currentUser[i][0] == \"Social\") {\n              array[currentUser[i][0]] = currentUser[i][1];\n            }else if (currentUser[i][0] == \"Passif\") {\n              this.setState({ passif: currentUser[i][1] });\n            }else if (currentUser[i][0] == \"Malus\") {\n              this.setState({ malus: currentUser[i][1] });\n            }\n          }\n          this.setState({ currentUser: array }, function() {\n            // console.log(this.state.currentUser['Mental']);\n          });\n        }\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    // Update the component if parent state is updated\n    if(this.props.id_desc !== prevProps.id_desc || this.state.update !== prevState.update) {\n      this.fetchData();\n      this.getCurrentUser();\n    }\n}\n\n  componentDidMount() {\n    this.fetchData();\n    this.getScripts();\n    this.getCurrentUser();\n  }\n\n  getScripts() {\n    var button_form_item = document.getElementsByClassName('btn_form_item');\n    var button_form_spell = document.getElementsByClassName('btn_form_spell');\n    var form_item = document.getElementsByClassName('form_item');\n    var form_spell = document.getElementsByClassName('form_spell');\n    var form_stats = document.getElementsByClassName('form_stats');\n    var form_caract = document.getElementsByClassName('form_caract');\n    var card_group = document.getElementsByClassName('char_card');\n    var forms = document.getElementsByClassName('form');\n    var button_form_stats = document.getElementsByClassName('btn_form_stats');\n    var button_form_caract = document.getElementsByClassName('btn_form_caract');\n    var button_show_item = document.getElementsByClassName('btn_show_item');\n    var list_items = document.getElementsByClassName('list_items');\n    var btn_form_base_item = document.getElementsByClassName('btn_form_base_item');\n    var form_base_item = document.getElementsByClassName('form_base_item');\n\n    $(btn_form_base_item).on('click', function() {\n      if($(form_base_item).hasClass(\"displayed\")) {\n          $(form_base_item).removeClass(\"displayed\");\n      }else {\n          $(forms).removeClass(\"displayed\");\n          $(form_base_item).addClass(\"displayed\");\n      }\n    })\n\n    $(button_show_item).on('click', function() {\n      if($(list_items).hasClass(\"displayed\")) {\n          $(list_items).removeClass(\"displayed\");\n      }else {\n          $(list_items).addClass(\"displayed\");\n      }\n    })\n\n\n    $(button_form_item).on('click', function() {\n        if($(form_item).hasClass(\"displayed\")) {\n            $(form_item).removeClass(\"displayed\");\n        }else {\n            $(forms).removeClass(\"displayed\");\n            $(form_item).addClass(\"displayed\");\n        }\n    })\n\n    $(button_form_caract).on('click', function() {\n      if($(form_caract).hasClass(\"displayed\")) {\n          $(form_caract).removeClass(\"displayed\");\n      }else {\n          $(forms).removeClass(\"displayed\");\n          $(form_caract).addClass(\"displayed\");\n      }\n    })\n\n    $(button_form_stats).on('click', function() {\n      if($(form_stats).hasClass(\"displayed\")) {\n          $(form_stats).removeClass(\"displayed\");\n      }else {\n          $(forms).removeClass(\"displayed\");\n          $(form_stats).addClass(\"displayed\");\n      }\n    })\n\n  $(card_group).on('click', function() {\n    $(forms).removeClass(\"displayed\");\n  })\n\n  $(button_form_spell).on('click', function() {\n    if($(form_spell).hasClass(\"displayed\")) {\n        $(form_spell).removeClass(\"displayed\");\n    }else {\n      $(forms).removeClass(\"displayed\");\n        $(form_spell).addClass(\"displayed\");\n    }\n  })\n}\n  \n   \n\n  getItems = () => {\n    var listItems = [];\n    for(let i = 0; i < this.state.items.length; i++) {\n     listItems.push(this.state.items[i]);\n    }\n    return (\n      listItems\n    )\n  };\n  getSpells = () => {\n    var listSpells = [];\n    for(let i = 0; i < this.state.spells.length; i++) {\n     listSpells.push(this.state.spells[i]);\n    }\n    return (\n      listSpells\n    )\n  };\n  \n  getBaseItems = () => {\n    var listBaseItems = [];\n    for(let i = 0; i < this.state.listBaseItems.length; i++) {\n     listBaseItems.push(this.state.listBaseItems[i]);\n    }\n    return (\n      listBaseItems\n    )\n  };\n\n  displayInventory = () => {\n    if(this.state.displayInventory) {\n      return false;\n    }else {\n      $(\".btn_inventory_spell\").removeClass('used');\n      $(\".btn_box_inventory\").addClass('used');\n      this.setState({\n        displayInventory: !this.state.displayInventory,\n        displaySpells: !this.state.displaySpells\n      })\n    }\n    \n  }\n  \n  displaySpells = () => {\n    if(this.state.displaySpells) {\n      return false;\n    }else {\n      // console.log(this.state.currentUser);\n      $(\".btn_inventory_spell\").removeClass('used');\n      $(\".btn_box_spells\").addClass('used');\n      this.setState({\n        displayInventory: !this.state.displayInventory,\n        displaySpells: !this.state.displaySpells\n      })\n    }\n  }\n  \n  deleteItem = (id, nbr, id_player) => {\n    // console.log(id_player);\n    if(nbr == 1) {\n      // alert(nbr);\n      axios.defaults.xsrfCookieName = 'csrftoken';\n      axios.defaults.xsrfHeaderName = 'X-CSRFToken';\n\n      axios.post(`https://ce-soir-c-est-jor.com/api/api/user/deleteItem/`\n      + id_player + \"/\" \n      + id\n      + \"/\" + this.props.id_party)\n      .then(res => {\n        this.setState({ update: !this.state.update });\n      })\n    }else {\n      // alert(nbr);\n      axios.defaults.xsrfCookieName = 'csrftoken';\n      axios.defaults.xsrfHeaderName = 'X-CSRFToken';\n\n      axios.post(`https://ce-soir-c-est-jor.com/api/api/user/subItem/`\n      + id_player + \"/\" \n      + id + \"/\"\n      + nbr\n      + \"/\" + this.props.id_party)\n      .then(res => {\n        this.setState({ update: !this.state.update });\n        // console.log(res);\n      })\n    }\n  }\n\n  addBaseItem = (id) => {\n    \n      axios.defaults.xsrfCookieName = 'csrftoken';\n      axios.defaults.xsrfHeaderName = 'X-CSRFToken';\n\n      axios.post(`https://ce-soir-c-est-jor.com/api/api/user/addItemFromList/`\n      + this.props.id_desc + \"/\" \n      + id\n      + \"/\" + this.props.id_party)\n      .then(res => {\n        this.setState({ update: !this.state.update });\n      })\n    \n  }\n    \n\n\n\n\n    render() {\n      var items = this.getItems();\n      var spells = this.getSpells();\n      var baseItems = this.getBaseItems();\n      return (\n        <div className='description'>\n          <div className=\"box_btn\">\n            <button className=\"btn_form_desc btn_form_stats\">Change stats</button>\n            <button className=\"btn_form_desc btn_form_caract\">Change caract</button>\n            <button className=\"btn_form_desc btn_form_item\">Add item</button>\n            <button className=\"btn_form_desc btn_form_spell\">Add spell</button>\n            <button className=\"btn_form_desc btn_show_item\">Show Items</button>\n          </div>\n          <div className=\"box_btn_inventory_spells\">\n            <button className=\"btn_inventory_spell btn_box_inventory used\" onClick={this.displayInventory.bind(this.displayInventory)}>Inventory</button>\n            <button className=\"btn_inventory_spell btn_box_spells\" onClick={this.displaySpells.bind(this.displaySpells)}>Spells</button>\n          </div>\n          {this.state.displayInventory ? \n            <div className=\"item_content\">\n              <div className=\"box_item_content\">\n                {items.map((item, i) => {\n                        return (\n                            <div className=\"item_box\" key={i}>\n                                <div className=\"btn_close\" onClick={this.deleteItem.bind(this.deleteItem, item.id, item.nbr, item.id_player)}><span className=\"content_btn_close\">x</span></div>\n                                <div className=\"item_name\">{item.itemName}</div>\n                                <div className=\"item_effect\">{item.itemEffect}</div>\n                                <div className=\"item_nbr\">( {item.nbr} )</div>\n                            </div>\n                  )})}\n              </div>\n            </div>\n            : null\n          }\n          {this.state.displaySpells ? \n            <div className=\"spell_content\">\n              <div className=\"box_spell_content\">\n                {spells.map((spell, i) => {\n                        return (\n                            <div className=\"spell_box\" key={i}>\n                                <div className=\"spell_name\">{spell.spellName}</div>\n                                <div className=\"spell_effect\">{spell.spellEffect}</div>\n                            </div>\n                  )})}\n              </div>\n            </div>\n            : null\n          }\n            <div className=\"content_passif_malus\">\n              <div className=\"box_passif\">{this.state.passif}</div>\n              <div className=\"box_malus\">{this.state.malus}</div>\n            </div>\n            <div className=\"list_items\">\n              <button className=\"btn_form_base_item\">Add Item</button>\n                  <div className=\"content_list_items\">\n                    {baseItems.map((item, i) => {\n                            return (\n                                <div className=\"item_box\" key={i}>\n                                    <div className=\"btn_add_item_from_list\" onClick={this.addBaseItem.bind(this.addBaseItem, item.id)}>+</div>\n                                    <div className=\"btn_close\" onClick={this.deleteItem.bind(this.deleteItem, item.id, item.nbr, item.id_player)}><span className=\"content_btn_close\">x</span></div>\n                                    <div className=\"item_name\">{item.itemName}</div>\n                                    <div className=\"item_effect\">{item.itemEffect}</div>\n                                    <div className=\"item_nbr\">( {item.nbr} )</div>\n                                </div>\n                    )})}\n                  </div>\n            </div>\n              <FormBaseItem \n              id_desc={0} \n              handler={this.handler}\n              id_party={this.props.id_party}/>\n              <FormItem \n              id_desc={this.props.id_desc} \n              handler={this.handler}\n              id_party={this.props.id_party}/>\n              <FormSpell \n              id_desc={this.props.id_desc} \n              handler={this.handler}\n              id_party={this.props.id_party}/>\n              <FormStats \n              id_desc={this.props.id_desc} \n              handlerStats={this.handlerStats}\n              health={this.state.currentUser['health']}\n              maxHealth={this.state.currentUser['maxHealth']}\n              mana={this.state.currentUser['mana']}\n              maxMana={this.state.currentUser['maxMana']}\n              id_party={this.props.id_party}\n              />\n              <FormCaract\n              id_desc={this.props.id_desc} \n              handlerStats={this.handlerStats}\n              physic={this.state.currentUser['Physique']}\n              mental={this.state.currentUser['Mental']}\n              social={this.state.currentUser['Social']}\n              id_party={this.props.id_party}\n              />\n        </div>\n      );\n    }\n  }\n\nexport default Description;"]},"metadata":{},"sourceType":"module"}